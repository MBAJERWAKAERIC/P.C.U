function stickyRepaint(){var t=$(this).width(),n=$(this).scrollLeft(),i=$(this).offset().left;$(".tableFloatingHeaderOriginal").css({left:i-n,clip:"rect(0px, "+(n+t)+"px, 140px, "+n+"px)"})}Sys.Application.add_load(function(){$(function(){$('[data-toggle="tooltip"]').tooltip()});var n=document.querySelector(".navbar-fixed-top"),t=document.querySelector(".js-sticky-headers");$(n).length&&$(n).css("position")==="fixed"?$(t).stickyTableHeaders({fixedOffset:$(n)}):$(t).stickyTableHeaders()});$(document).on("enabledStickiness.stickyTableHeaders",function(n){$(window).on("resize",function(){$(".navbar-fixed-top").length&&$(".navbar-fixed-top").css("position")==="fixed"?$(".js-sticky-headers").stickyTableHeaders({fixedOffset:$(".navbar-fixed-top")}):$(".js-sticky-headers").stickyTableHeaders();$(".table-responsive").each(stickyRepaint)});var t=$(n.target).offset().left,i=$(n.target).parent(".table-responsive").width();$(n.target).find(".tableFloatingHeaderOriginal").css({left:t,right:$(window).width()-t-i,clip:"rect(0px, "+(i+2)+"px, 140px, 0px)"});$(n.target).parent(".table-responsive").scroll(stickyRepaint)});(function(){window.Rock=window.Rock||{};Rock.dialogs=function(){return{alert:function(n){bootbox.dialog({message:n,buttons:{ok:{label:"OK",className:"btn-primary"}}})},confirm:function(n,t){bootbox.dialog({message:n,buttons:{ok:{label:"OK",className:"btn-primary",callback:function(){t(!0)}},cancel:{label:"Cancel",className:"btn-default",callback:function(){t(!1)}}}})},confirmPreventOnCancel:function(n,t){if(n.currentTarget&&n.currentTarget.disabled)return!1;n.preventDefault();bootbox.dialog({message:t,buttons:{ok:{label:"OK",className:"btn-primary",callback:function(){var t=n.target.href?n.target.href:n.target.parentElement.href;window.location=t}},cancel:{label:"Cancel",className:"btn-default"}}})},confirmDelete:function(n,t,i){var r="Are you sure you want to delete this "+t+"?";i&&(r+=" "+i);this.confirmPreventOnCancel(n,r)},updateModalScrollBar:function(n){Rock.controls.modal.updateSize(n)}}}()})(jQuery),function(){"use strict";window.Rock=window.Rock||{};Rock.settings=function(){var n={};return{initialize:function(t){typeof t=="object"&&(n=t)},get:function(t){return n[t]},insert:function(t,i){n[t]=i},remove:function(t){n[t]&&delete n[t]}}}()}(),function(){"use strict";window.Rock=window.Rock||{};Rock.utility=function(){return{setContext:function(n,t){$.ajax({type:"PUT",url:Rock.settings.get("baseUrl")+"api/"+n+"/SetContext/"+t,success:function(){},error:function(n,t,i){alert(t+" ["+i+"]: "+n.responseText)}})},uuidv4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n==="x"?t:t&3|8;return i.toString(16)})}}}()}(),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.addressControl=function(){return{initialize:function(n){if(!n.id)throw"id is required";},clientValidate:function(t,i){var u=n(t).closest(".js-addressControl"),e=u.find(".js-address-field.required"),o=u.attr("data-itemlabel"),r=!0,f=[];e.each(function(t,i){var u=n(i);typeof i=="undefined"||u.val().length>0?u.parent("div.form-group").removeClass("has-error"):(u.parent("div.form-group").addClass("has-error"),f.push(u.attr("field-name")),r=!1)});r||(t.errormessage=o+" field is required: "+f.join(", "));i.IsValid=r}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.assetManager=function(){return{initialize:function(t){function k(){var n=r.closest(".overview").height();d.height(n);b&&b.refresh()}function ft(n){var t=new RegExp("^[^*/><?\\|:,~]+$");return t.test(n)}var at=this,i=n("#"+t.controlId),r=i.find(".js-folder-treeview .treeview"),u=i.find(".js-selectfolder"),h=i.find(".js-expandedFolders"),f=i.find(".js-assetstorage-id"),d=i.find(".js-treeviewport"),et=i.find(".js-treetrack"),c=i.find(".js-isroot"),e=i.find(".js-createfolder"),g=i.find(".js-createfolder-div"),l=i.find(".js-createfolder-input"),ot=i.find(".js-createfolder-cancel"),st=i.find(".js-createfolder-accept"),o=i.find(".js-deletefolder"),a=i.find(".js-createfolder-notification"),nt=i.closest(".js-AssetManager-modal"),s,rt,ut,w,b;s=nt.length?nt.find(".js-singleselect"):i.find(".js-singleselect");var tt=i.find(".js-minselect"),v=i.find(".js-checkbox"),ht=i.find(".js-renamefile"),it=i.find(".js-renamefile-div"),y=i.find(".js-renamefile-input"),ct=i.find(".js-renamefile-cancel"),lt=i.find(".js-renamefile-accept"),p=i.find(".js-renamefile-notification");if(r.length!==0){if(f.val()==="-1"&&n(".js-assetselect").addClass("aspNetDisabled"),v.removeAttr("checked"),u.val()===""&&f.val()==="-1"?e.addClass("aspNetDisabled"):e.removeClass("aspNetDisabled"),u.val()===""||c.val()==="True"?o.addClass("aspNetDisabled"):o.removeClass("aspNetDisabled"),rt=r.data("rockTree"),!rt){ut=[encodeURIComponent(f.val()+","+u.val())];w=h.val().split("||");w.forEach(function(n,t,i){i[t]=encodeURIComponent(i[t])});r.rockTree({restUrl:t.restUrl,selectedIds:ut,expandedIds:w});b=new IScroll(d[0],{mouseWheel:!1,scrollX:!0,scrollY:!1,indicators:{el:"#"+et.attr("id"),interactive:!0,resize:!1,listenY:!1,listenX:!0},click:!1,preventDefaultException:{tagName:/.*/}});n(document).ready(function(){n(window).on("resize",function(){k()})});r.on("rockTree:dataBound rockTree:rendered",function(){k()});r.on("rockTree:expand rockTree:collapse",function(t,i){k();var r=n(t.currentTarget).find(".rocktree-children").filter(":visible").closest(".rocktree-item").map(function(){var t=n(this).attr("data-id");if(t!==i)return decodeURIComponent(t)}).get().join("||");h.val(r)})}r.off("rockTree:selected").on("rockTree:selected",function(n,i){var r=unescape(i).split(","),s=r[0]||"",l=r[1]||"",a=r[2]||!1,v,p=encodeURIComponent(h.val()),y;u.val()===""&&f.val()==="-1"?e.addClass("aspNetDisabled"):e.removeClass("aspNetDisabled");u.val()===""||c.val()==="True"?o.addClass("aspNetDisabled"):o.removeClass("aspNetDisabled");(u.val()!==l||f.val()!==s)&&(u.val(l),f.val(s),c.val(a),v="storage-id:"+s+"?folder-selected:"+l.replace(/\\/g,"/").replace("'","\\'")+"?expanded-folders:"+p.replace("'","\\'")+"?isRoot:"+a,y="javascript:__doPostBack('"+t.filesUpdatePanelId+"','"+v+"');",window.location=y)});v.off("click").on("click",function(){var t=v.filter(":checked").length;t===0?(s.addClass("aspNetDisabled"),n(".js-minselect").addClass("aspNetDisabled")):t===1?(s.removeClass("aspNetDisabled"),tt.removeClass("aspNetDisabled")):(s.addClass("aspNetDisabled"),tt.removeClass("aspNetDisabled"))});e.off("click").on("click",function(){g.fadeToggle();l.val("")});ot.off("click").on("click",function(){g.fadeOut();l.val("");a.hide().text("")});st.off("click").on("click",function(n){var t=l.val();t===""&&(a.show().text("Folder name is required."),n.preventDefault());ft(t)||(a.show().text("Invalid characters in path"),n.preventDefault())});ht.off("click").on("click",function(){it.fadeToggle();y.val("")});ct.off("click").on("click",function(){it.fadeOut();y.val("");p.hide().text("")});lt.off("click").on("click",function(n){var t=y.val();t===""&&(p.show().text("File name is required."),n.preventDefault());ft(t)||(p.show().text("Invalid characters in file name."),n.preventDefault())});o.off("click").on("click",function(t){if(n(this).attr("disabled")==="disabled")return!1;Rock.dialogs.confirmDelete(t,"folder and all its contents")})}}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.autoCompleteDropDown=function(){var i,t=function(t){this.controlId=t.controlId;this.valueControlId=t.valueControlId;this.$el=n("#"+this.controlId);this.name=t.name;this.url=t.url;this.limit=t.limit;this.idProperty=t.idProperty;this.valuekey=t.valuekey;this.template=t.template;this.header=t.header;this.footer=t.footer};return t.prototype={constructor:t,initialize:function(){var n=this,t=require("liquid"),i={compile:function(n){var i=t.Template.parse(n);return{render:function(n){return i.render(n)}}}};this.$el.typeahead({name:this.name,limit:this.limit,valueKey:this.valuekey,template:this.template,header:this.header,footer:this.footer,engine:i,remote:{url:Rock.settings.get("baseUrl")+this.url,filter:function(t){return t.forEach(function(t){t.tokens=t[n.valuekey].replace(/,/g,"").split(" ")}),t}}});this.initializeEventHandlers()},initializeEventHandlers:function(){var t=this,i=this.idProperty,r=function(r){n("#"+t.valueControlId).val(r[i])};this.$el.on("typeahead:selected typeahead:autocompleted",function(n,i){if(r(i),typeof t.onSelected=="function")t.onSelected(i)})}},i={defaults:{controlId:null,name:"autoComplete",valueControlId:null,limit:5,idProperty:"Id",valuekey:"value",template:"<p>{{value}}<\/p>",header:"",footer:""},initialize:function(r){var f,u=n.extend({},i.defaults,r);if(!u.controlId)throw"controlId is required";if(!u.valueControlId)throw"valueControlId is required";if(!u.url)throw"url is required";return f=new t(u),n(function(){f.initialize()}),f}}}()}(jQuery);!function(n,t){"function"==typeof define&&define.amd?define(["jquery"],function(n){return t(n)}):"object"==typeof exports?module.exports=t(require("jquery")):jQuery&&!jQuery.fn.colorpicker&&t(jQuery)}(this,function(n){"use strict";var t=function(i,r,u,f,e){this.fallbackValue=u?"string"==typeof u?this.parse(u):u:null;this.fallbackFormat=f?f:"rgba";this.hexNumberSignPrefix=e===!0;this.value=this.fallbackValue;this.origFormat=null;this.predefinedColors=r?r:{};this.colors=n.extend({},t.webColors,this.predefinedColors);i&&("undefined"!=typeof i.h?this.value=i:this.setColor(String(i)));this.value||(this.value={h:0,s:0,b:0,a:1})},r,i;t.webColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32",transparent:"transparent"};t.prototype={constructor:t,colors:{},predefinedColors:{},getValue:function(){return this.value},setValue:function(n){this.value=n},_sanitizeNumber:function(n){return"number"==typeof n?n:isNaN(n)||null===n||""===n||void 0===n?1:""===n?0:"undefined"!=typeof n.toLowerCase?(n.match(/^\./)&&(n="0"+n),Math.ceil(100*parseFloat(n))/100):1},isTransparent:function(n){return!(!n||!("string"==typeof n||n instanceof String))&&(n=n.toLowerCase().trim(),"transparent"===n||n.match(/#?00000000/)||n.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/))},rgbaIsTransparent:function(n){return 0===n.r&&0===n.g&&0===n.b&&0===n.a},setColor:function(n){if(n=n.toLowerCase().trim()){if(this.isTransparent(n))return this.value={h:0,s:0,b:0,a:0},!0;var t=this.parse(n);t?(this.value=this.value={h:t.h,s:t.s,b:t.b,a:t.a},this.origFormat||(this.origFormat=t.format)):this.fallbackValue&&(this.value=this.fallbackValue)}return!1},setHue:function(n){this.value.h=1-n},setSaturation:function(n){this.value.s=n},setBrightness:function(n){this.value.b=1-n},setAlpha:function(n){this.value.a=Math.round(parseInt(100*(1-n),10)*1)/100},toRGB:function(n,t,i,r){0===arguments.length&&(n=this.value.h,t=this.value.s,i=this.value.b,r=this.value.a);n*=360;var e,o,s,f,u;return n=n%360/60,u=i*t,f=u*(1-Math.abs(n%2-1)),e=o=s=i-u,n=~~n,e+=[u,f,0,0,f,u][n],o+=[f,u,u,f,0,0][n],s+=[0,0,f,u,u,f][n],{r:Math.round(255*e),g:Math.round(255*o),b:Math.round(255*s),a:r}},toHex:function(n,t,i,r,u){var e,f;return(arguments.length<=1&&(t=this.value.h,i=this.value.s,r=this.value.b,u=this.value.a),e="#",f=this.toRGB(t,i,r,u),this.rgbaIsTransparent(f))?"transparent":(n||(e=this.hexNumberSignPrefix?"#":""),e+(16777216+(parseInt(f.r)<<16)+(parseInt(f.g)<<8)+parseInt(f.b)).toString(16).slice(1))},toHSL:function(n,t,i,r){0===arguments.length&&(n=this.value.h,t=this.value.s,i=this.value.b,r=this.value.a);var e=n,u=(2-t)*i,f=t*i;return f/=u>0&&u<=1?u:2-u,u/=2,f>1&&(f=1),{h:isNaN(e)?0:e,s:isNaN(f)?0:f,l:isNaN(u)?0:u,a:isNaN(r)?0:r}},toAlias:function(n,t,i,r){var u,e=0===arguments.length?this.toHex(!0):this.toHex(!0,n,t,i,r),o="alias"===this.origFormat?e:this.toString(!1,this.origFormat),f;for(f in this.colors)if(u=this.colors[f].toLowerCase().trim(),u===e||u===o)return f;return!1},RGBtoHSB:function(n,t,i,r){n/=255;t/=255;i/=255;var e,o,f,u;return f=Math.max(n,t,i),u=f-Math.min(n,t,i),e=0===u?null:f===n?(t-i)/u:f===t?(i-n)/u+2:(n-t)/u+4,e=(e+360)%6/6,o=0===u?0:u/f,{h:this._sanitizeNumber(e),s:o,b:f,a:this._sanitizeNumber(r)}},HueToRGB:function(n,t,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?n+(t-n)*i*6:2*i<1?t:3*i<2?n+(t-n)*(2/3-i)*6:n},HSLtoRGB:function(n,t,i,r){var u;t<0&&(t=0);u=i<=.5?i*(1+t):i+t-i*t;var f=2*i-u,e=n+1/3,o=n,s=n-1/3,h=Math.round(255*this.HueToRGB(f,u,e)),c=Math.round(255*this.HueToRGB(f,u,o)),l=Math.round(255*this.HueToRGB(f,u,s));return[h,c,l,this._sanitizeNumber(r)]},parse:function(t){if("string"!=typeof t)return this.fallbackValue;if(0===arguments.length)return!1;var u,f,i=this,r=!1,e="undefined"!=typeof this.colors[t];return e&&(t=this.colors[t].toLowerCase().trim()),n.each(this.stringParsers,function(n,o){var s=o.re.exec(t);return u=s&&o.parse.apply(i,[s]),!u||(r={},f=e?"alias":o.format?o.format:i.getValidFallbackFormat(),r=f.match(/hsla?/)?i.RGBtoHSB.apply(i,i.HSLtoRGB.apply(i,u)):i.RGBtoHSB.apply(i,u),r instanceof Object&&(r.format=f),!1)}),r},getValidFallbackFormat:function(){var n=["rgba","rgb","hex","hsla","hsl"];return this.origFormat&&n.indexOf(this.origFormat)!==-1?this.origFormat:this.fallbackFormat&&n.indexOf(this.fallbackFormat)!==-1?this.fallbackFormat:"rgba"},toString:function(n,i,r){i=i||this.origFormat||this.fallbackFormat;r=r||!1;var u=!1;switch(i){case"rgb":return u=this.toRGB(),this.rgbaIsTransparent(u)?"transparent":"rgb("+u.r+","+u.g+","+u.b+")";case"rgba":return u=this.toRGB(),"rgba("+u.r+","+u.g+","+u.b+","+u.a+")";case"hsl":return u=this.toHSL(),"hsl("+Math.round(360*u.h)+","+Math.round(100*u.s)+"%,"+Math.round(100*u.l)+"%)";case"hsla":return u=this.toHSL(),"hsla("+Math.round(360*u.h)+","+Math.round(100*u.s)+"%,"+Math.round(100*u.l)+"%,"+u.a+")";case"hex":return this.toHex(n);case"alias":return u=this.toAlias(),u===!1?this.toString(n,this.getValidFallbackFormat()):r&&!(u in t.webColors)&&u in this.predefinedColors?this.predefinedColors[u]:u;default:return u}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(n){return[n[1],n[2],n[3],1]}},{re:/rgb\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(n){return[2.55*n[1],2.55*n[2],2.55*n[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(n){return[n[1],n[2],n[3],n[4]]}},{re:/rgba\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(n){return[2.55*n[1],2.55*n[2],2.55*n[3],n[4]]}},{re:/hsl\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(n){return[n[1]/360,n[2]/100,n[3]/100,n[4]]}},{re:/hsla\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(n){return[n[1]/360,n[2]/100,n[3]/100,n[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16),1]}}],colorNameToHex:function(n){return"undefined"!=typeof this.colors[n.toLowerCase()]&&this.colors[n.toLowerCase()]}};r={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",fallbackColor:!1,fallbackFormat:"hex",hexNumberSignPrefix:!0,sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b><\/b><\/i><\/div><div class="colorpicker-hue"><i><\/i><\/div><div class="colorpicker-alpha"><i><\/i><\/div><div class="colorpicker-color"><div /><\/div><div class="colorpicker-selectors"><\/div><\/div>',align:"right",customClass:null,colorSelectors:null};i=function(t,i){var u,f,e;this.element=n(t).addClass("colorpicker-element");this.options=n.extend(!0,{},r,this.element.data(),i);this.component=this.options.component;this.component=this.component!==!1&&this.element.find(this.component);this.component&&0===this.component.length&&(this.component=!1);this.container=this.options.container===!0?this.element:this.options.container;this.container=this.container!==!1&&n(this.container);this.input=this.element.is("input")?this.element:!!this.options.input&&this.element.find(this.options.input);this.input&&0===this.input.length&&(this.input=!1);this.color=this.createColor(this.options.color!==!1?this.options.color:this.getValue());this.format=this.options.format!==!1?this.options.format:this.color.origFormat;this.options.color!==!1&&(this.updateInput(this.color),this.updateData(this.color));this.disabled=!1;u=this.picker=n(this.options.template);(this.options.customClass&&u.addClass(this.options.customClass),this.options.inline?u.addClass("colorpicker-inline colorpicker-visible"):u.addClass("colorpicker-hidden"),this.options.horizontal&&u.addClass("colorpicker-horizontal"),["rgba","hsla","alias"].indexOf(this.format)===-1&&this.options.format!==!1&&"transparent"!==this.getValue()||u.addClass("colorpicker-with-alpha"),"right"===this.options.align&&u.addClass("colorpicker-right"),this.options.inline===!0&&u.addClass("colorpicker-no-arrow"),this.options.colorSelectors)&&(f=this,e=f.picker.find(".colorpicker-selectors"),e.length>0&&(n.each(this.options.colorSelectors,function(t,i){var r=n("<i />").addClass("colorpicker-selectors-color").css("background-color",i).data("class",t).data("alias",t);r.on("mousedown.colorpicker touchstart.colorpicker",function(t){t.preventDefault();f.setValue("alias"===f.format?n(this).data("alias"):n(this).css("background-color"))});e.append(r)}),e.show().addClass("colorpicker-visible")));u.on("mousedown.colorpicker touchstart.colorpicker",n.proxy(function(n){n.target===n.currentTarget&&n.preventDefault()},this));u.find(".colorpicker-saturation, .colorpicker-hue, .colorpicker-alpha").on("mousedown.colorpicker touchstart.colorpicker",n.proxy(this.mousedown,this));u.appendTo(this.container?this.container:n("body"));this.input!==!1&&(this.input.on({"keyup.colorpicker":n.proxy(this.keyup,this)}),this.input.on({"input.colorpicker":n.proxy(this.change,this)}),this.component===!1&&this.element.on({"focus.colorpicker":n.proxy(this.show,this)}),this.options.inline===!1&&this.element.on({"focusout.colorpicker":n.proxy(this.hide,this)}));this.component!==!1&&this.component.on({"click.colorpicker":n.proxy(this.show,this)});this.input===!1&&this.component===!1&&this.element.on({"click.colorpicker":n.proxy(this.show,this)});this.input!==!1&&this.component!==!1&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":n.proxy(this.show,this),"focus.colorpicker":n.proxy(this.show,this)});this.update();n(n.proxy(function(){this.element.trigger("create")},this))};i.Color=t;i.prototype={constructor:i,destroy:function(){this.picker.remove();this.element.removeData("colorpicker","color").off(".colorpicker");this.input!==!1&&this.input.off(".colorpicker");this.component!==!1&&this.component.off(".colorpicker");this.element.removeClass("colorpicker-element");this.element.trigger({type:"destroy"})},reposition:function(){if(this.options.inline!==!1||this.options.container)return!1;var i=this.container&&this.container[0]!==window.document.body?"position":"offset",n=this.component||this.element,t=n[i]();"right"===this.options.align&&(t.left-=this.picker.outerWidth()-n.outerWidth());this.picker.css({top:t.top+n.outerHeight(),left:t.left})},show:function(t){this.isDisabled()||(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),n(window).on("resize.colorpicker",n.proxy(this.reposition,this)),!t||this.hasInput()&&"color"!==this.input.attr("type")||t.stopPropagation&&t.preventDefault&&(t.stopPropagation(),t.preventDefault()),!this.component&&this.input||this.options.inline!==!1||n(window.document).on({"mousedown.colorpicker":n.proxy(this.hide,this)}),this.element.trigger({type:"showPicker",color:this.color}))},hide:function(t){return("undefined"==typeof t||!t.target||!(n(t.currentTarget).parents(".colorpicker").length>0||n(t.target).parents(".colorpicker").length>0))&&(this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),n(window).off("resize.colorpicker",this.reposition),n(window.document).off({"mousedown.colorpicker":this.hide}),this.update(),void this.element.trigger({type:"hidePicker",color:this.color}))},updateData:function(n){return n=n||this.color.toString(!1,this.format),this.element.data("color",n),n},updateInput:function(n){return n=n||this.color.toString(!1,this.format),this.input!==!1&&(this.input.prop("value",n),this.input.trigger("change")),n},updatePicker:function(n){"undefined"!=typeof n&&(this.color=this.createColor(n));var t=this.options.horizontal===!1?this.options.sliders:this.options.slidersHorz,i=this.picker.find("i");if(0!==i.length)return this.options.horizontal===!1?(t=this.options.sliders,i.eq(1).css("top",t.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",t.alpha.maxTop*(1-this.color.value.a))):(t=this.options.slidersHorz,i.eq(1).css("left",t.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",t.alpha.maxLeft*(1-this.color.value.a))),i.eq(0).css({top:t.saturation.maxTop-this.color.value.b*t.saturation.maxTop,left:this.color.value.s*t.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(!0,this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex(!0)),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(!0,this.format)),n},updateComponent:function(n){var t,i;return(t="undefined"!=typeof n?this.createColor(n):this.color,this.component!==!1)&&(i=this.component.find("i").eq(0),i.length>0?i.css({backgroundColor:t.toString(!0,this.format)}):this.component.css({backgroundColor:t.toString(!0,this.format)})),t.toString(!1,this.format)},update:function(n){var t;return this.getValue(!1)===!1&&n!==!0||(t=this.updateComponent(),this.updateInput(t),this.updateData(t),this.updatePicker()),t},setValue:function(n){this.color=this.createColor(n);this.update(!0);this.element.trigger({type:"changeColor",color:this.color,value:n})},createColor:function(n){return new t(n?n:null,this.options.colorSelectors,this.options.fallbackColor?this.options.fallbackColor:this.color,this.options.fallbackFormat,this.options.hexNumberSignPrefix)},getValue:function(n){n="undefined"==typeof n?this.options.fallbackColor:n;var t;return t=this.hasInput()?this.input.val():this.element.data("color"),void 0!==t&&""!==t&&null!==t||(t=n),t},hasInput:function(){return this.input!==!1},isDisabled:function(){return this.disabled},disable:function(){return this.hasInput()&&this.input.prop("disabled",!0),this.disabled=!0,this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0},enable:function(){return this.hasInput()&&this.input.prop("disabled",!1),this.disabled=!1,this.element.trigger({type:"enable",color:this.color,value:this.getValue()}),!0},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(t){var u;!t.pageX&&!t.pageY&&t.originalEvent&&t.originalEvent.touches&&(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY);t.stopPropagation();t.preventDefault();var f=n(t.target),i=f.closest("div"),r=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!i.is(".colorpicker")){if(i.is(".colorpicker-saturation"))this.currentSlider=n.extend({},r.saturation);else if(i.is(".colorpicker-hue"))this.currentSlider=n.extend({},r.hue);else{if(!i.is(".colorpicker-alpha"))return!1;this.currentSlider=n.extend({},r.alpha)}u=i.offset();this.currentSlider.guide=i.find("i")[0].style;this.currentSlider.left=t.pageX-u.left;this.currentSlider.top=t.pageY-u.top;this.mousePointer={left:t.pageX,top:t.pageY};n(window.document).on({"mousemove.colorpicker":n.proxy(this.mousemove,this),"touchmove.colorpicker":n.proxy(this.mousemove,this),"mouseup.colorpicker":n.proxy(this.mouseup,this),"touchend.colorpicker":n.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(n){!n.pageX&&!n.pageY&&n.originalEvent&&n.originalEvent.touches&&(n.pageX=n.originalEvent.touches[0].pageX,n.pageY=n.originalEvent.touches[0].pageY);n.stopPropagation();n.preventDefault();var t=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((n.pageX||this.mousePointer.left)-this.mousePointer.left))),i=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((n.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=t+"px",this.currentSlider.guide.top=i+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,t/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,i/this.currentSlider.maxTop),this.options.format!==!1||"setAlpha"!==this.currentSlider.callTop&&"setAlpha"!==this.currentSlider.callLeft||(1!==this.color.value.a?(this.format="rgba",this.color.origFormat="rgba"):(this.format="hex",this.color.origFormat="hex")),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(t){return t.stopPropagation(),t.preventDefault(),n(window.document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},change:function(){this.color=this.createColor(this.input.val());this.color.origFormat&&this.options.format===!1&&(this.format=this.color.origFormat);this.getValue(!1)!==!1&&(this.updateData(),this.updateComponent(),this.updatePicker());this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})},keyup:function(n){38===n.keyCode?(this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0)):40===n.keyCode&&(this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0));this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})}};n.colorpicker=i;n.fn.colorpicker=function(t){var u=Array.prototype.slice.call(arguments,1),f=1===this.length,r=null,e=this.each(function(){var e=n(this),f=e.data("colorpicker"),o="object"==typeof t?t:{};f||(f=new i(this,o),e.data("colorpicker",f));"string"==typeof t?n.isFunction(f[t])?r=f[t].apply(f,u):(u.length&&(f[t]=u[0]),r=f[t]):r=e});return f?r:e};n.fn.colorpicker.constructor=i}),function(n){n.fn.rating=function(){function f(t,i,r,u){var f=n(t).find('[data-value="'+i+'"]');f.removeClass(u).addClass(r);f.prevAll("[data-value]").removeClass(u).addClass(r);f.nextAll("[data-value]").removeClass(r).addClass(u)}function e(t,i,r){var u=n(t);u.find("[data-value]").removeClass(i).addClass(r)}function s(n,t){n.val(t).trigger("change");t===n.data("empty-value")?n.siblings(".rating-clear").hide():n.siblings(".rating-clear").show()}for(var p,r=this.length-1;r>=0;r--){for(var h,t=n(this[r]),c=t.data("max")||5,l=t.data("min")||0,w=t.val()||0,u=t.data("icon-lib")||"glyphicon",a=t.data("active-icon")||"glyphicon-star",v=t.data("inactive-icon")||"glyphicon-star-empty",y=t.data("clearable")||null,b=t.data("clearable-icon")||"glyphicon-remove",o="",i=l;i<=c;i++)o+=i<=w?['<i class="',u," ",a,'" data-value="',i,'"><\/i>'].join(""):['<i class="',u," ",v,'" data-value="',i,'"><\/i>'].join("");y&&(o+=[' <a class="rating-clear" style="display:none;" href="javascript:void">','<span class="',u," ",b,'"><\/span> ',y,"<\/a>"].join(""));p=t.clone(!0).addClass("hidden").data("max",c).data("min",l).data("icon-lib",u).data("active-icon",a).data("inactive-icon",v);h=['<div class="rating-input">',o,"<\/div>"].join("");t.parents(".rating-input").length<=0&&t.replaceWith(n(h).append(p))}n(".rating-input").on("mouseenter","[data-value]",function(){var t=n(this);input=t.siblings("input");f(t.closest(".rating-input"),t.data("value"),input.data("active-icon"),input.data("inactive-icon"))}).on("mouseleave","[data-value]",function(){var i=n(this),t=i.siblings("input"),r=t.val(),s=t.data("min"),h=t.data("max"),u=t.data("active-icon"),o=t.data("inactive-icon");r>=s&&r<=h?f(i.closest(".rating-input"),r,u,o):e(i.closest(".rating-input"),u,o)}).on("click","[data-value]",function(t){var i=n(this),r=i.data("value"),u=i.siblings("input");return s(u,r),t.preventDefault(),!1}).on("click",".rating-clear",function(t){var r=n(this),i=r.siblings("input"),u=i.data("active-icon"),f=i.data("inactive-icon");return s(i,i.data("empty-value")),e(r.closest(".rating-input"),u,f),t.preventDefault(),!1}).each(function(){var t=n(this).find("input"),i=t.val(),r=t.data("min"),u=t.data("max");i!==""&&+i>=r&&+i<=u?(f(this,i),n(this).find(".rating-clear").show()):(t.val(t.data("empty-value")),e(this))})};n(function(){n("input.rating[type=number]").length>0&&n("input.rating[type=number]").rating()})}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.bootstrapButton=function(){return{showLoading:function(t){typeof Page_ClientValidate=="function"&&Page_IsValid&&Page_ClientValidate();var i=n(t);return Page_IsValid&&setTimeout(function(){i.prop("disabled",!0);i.attr("disabled","disabled");i.addClass("disabled");i.html(i.attr("data-loading-text"))},0),!0},onCompleted:function(t){var i=n(t),u,f,e,o,r;i.prop("disabled",!0);i.attr("disabled","disabled");i.addClass("disabled");u=i.attr("data-completed-text");u&&u!=""?i.html(u):i.html(i.attr("data-init-text"));f=i.attr("data-completed-message");f&&f!=""&&(e=i.attr("id")+"_msg",o=n("<span />").attr("id",e).html(f),i.after(o));r=Number(i.attr("data-timeout-text"));r&&!isNaN(r)&&(r=r*1e3,setTimeout(function(){i.prop("disabled",!1);i.removeAttr("disabled");i.removeClass("disabled");i.html(i.attr("data-init-text"));var r=i.attr("id")+"_msg",t=n("#"+r);t&&t.remove()},r))}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.buttonDropDownList=function(){return{initialize:function(t){if(!t.controlId)throw"id is required";var i=n("#"+t.controlId),r=i.find(".js-buttondropdown-btn-select"),u=i.find(".js-buttondropdown-selected-id"),f=i.attr("data-checkmarks-enabled")==1;n(".dropdown-menu a",i).on("click",function(){var t=n(this),s=t.html(),e=t.html()+" <span class='fa fa-caret-down' ><\/span >",o=t.attr("data-id"),i=t.attr("data-postback-script");f?(t.closest(".dropdown-menu").find(".js-selectionicon").removeClass("fa-check"),t.find(".js-selectionicon").addClass("fa-check")):r.html(e);u.val(o);i&&(window.location=i)})}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.buttonGroup=function(){return{initialize:function(t){if(!t.id)throw"id is required";var i=n("#"+t.id),r=i.find(".js-buttongroup-item"),u=i.attr("data-selecteditemclass"),f=i.attr("data-unselecteditemclass");r.on("click",function(){var t=n(this),o=r.not(t),e,i;o.removeClass(u).addClass(f);t.removeClass(f).addClass(u);e=t.find("input");i=e.prop("onclick");i&&i()})}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.captcha=function(){return{initialize:function(t){if(!t.id)throw"id is required";if(!t.key)throw"key is required";if(n("#"+t.id).data("key",t.key),!n("#captchaScriptId").length){n.ajaxSetup({cache:!0});n("head").prepend("<script id='captchaScriptId' src='https://www.google.com/recaptcha/api.js?render=explicit&onload=Rock_controls_captcha_onloadInitialize' />")}window.Rock_controls_captcha_onloadInitialize||(window.Rock_controls_captcha_onloadInitialize=function(){Rock.controls.captcha.onloadInitialize()});Rock.controls.captcha._onloadInitialized!==!0&&(Sys.Application.add_load(function(){Rock.controls.captcha.onloadInitialize()}),Rock.controls.captcha._onloadInitialized=!0)},onloadInitialize:function(){typeof grecaptcha!="undefined"&&typeof grecaptcha.render!="undefined"&&n(".js-captcha").each(function(){var t=n(this),i=t.closest(".form-group").find(".js-captcha-validator");if(t.data("captcha-id")==undefined){var r=function(){ValidatorValidate(window[i.prop("id")])},u=function(){ValidatorValidate(window[i.prop("id")])},f=grecaptcha.render(t.prop("id"),{sitekey:t.data("key"),callback:r,"expired-callback":u});t.data("captcha-id",f)}})},clientValidate:function(t,i){var r=n(t).closest(".form-group").find(".js-captcha"),u=r.data("required")==!0,f=r.data("captcha-id"),e=!u||grecaptcha.getResponse(f)!=="";e?(r.closest(".form-group").removeClass("has-error"),i.IsValid=!0):(r.closest(".form-group").addClass("has-error"),i.IsValid=!1,t.errormessage=r.data("required-error-message"))}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls.charts=function(){return{plotChartData:function(t,i,r,u,f,e){var l={},s=[],v={label:u+" Goal",chartData:[],data:[]},o,c,y,k,d,a,h,g,p,w,b,nt;for(i.customSettings&&(v.color=i.customSettings.goalSeriesColor),o=0;o<t.length;o++)t[o].MetricValueType&&t[o].MetricValueType==1?(v.data.push([t[o].DateTimeStamp,t[o].YValue]),v.chartData.push(t[o])):(c=t[o].MetricValuePartitionEntityIds,c&&c!=""||(c=t[o].SeriesName),l[c]||(y=t[o].SeriesName,t[o].MetricValuePartitionEntityIds&&t[o].MetricValuePartitionEntityIds!=""&&!e&&f&&(k=JSON.stringify(t[o].MetricValuePartitionEntityIds.split(",")),n.ajax({type:"POST",url:f,data:k,async:!1,success:null,contentType:"application/json"}).done(function(n){y=n})),y=y||u||"value",l[c]={label:y,chartData:[],data:[]}),l[c].data.push([t[o].DateTimeStamp,t[o].YValue]),l[c].chartData.push(t[o]));for(d in l)h=l[d],h.data.length&&s.push(h);if(e&&s.length!=1){a={};h=null;for(g in s)h=s[g],n.each(h.data,function(n,t){var r=t[0],i=a[r];i?(i.chartData.YValue+=h.chartData[n].YValue,i.data[1]+=t[1]):a[r]={chartData:h.chartData[n],data:t}});p=[];w=[];for(b in a)p.push(a[b].data),w.push(a[b].chartData);s=[];w.sort(function(n,t){return t.DateTimeStamp-n.DateTimeStamp});p.sort(function(n,t){return t[0]-n[0]});nt={label:u+" Total",chartData:w,data:p};s.push(nt)}v.data.length&&s.push(v);s.length>0?n.plot(r,s,i):n(r).html('<div class="alert alert-info">No Data Found<\/div>')},plotPieChartData:function(t,i,r){for(var f=[],u=0;u<t.length;u++)f.push({label:t[u].MetricTitle,data:t[u].YValueTotal,chartData:[t[u]]});f.length>0?n.plot(r,f,i):n(r).html('<div class="alert alert-info">No Data Found<\/div>')},plotBarChartData:function(t,i,r,u){for(var h=[],o={},c=[],l={},e,a,v,s,f=0;f<t.length;f++)e=t[f].SeriesName,t[f].MetricValuePartitionEntityIds&&(l[t[f].MetricValuePartitionEntityIds]||u&&(a=JSON.stringify(t[f].MetricValuePartitionEntityIds.split(",")),n.ajax({type:"POST",url:u,data:a,async:!1,success:null,contentType:"application/json"}).done(function(n){l[t[f].MetricValuePartitionEntityIds]=n})),e=l[t[f].MetricValuePartitionEntityIds]||e),o[e]||(o[e]=0),o[e]+=t[f].YValue;v=0;for(s in o)h.push([s,o[s]]),v++,c.push(s);c.push(e);h.length>0?(i.series.chartData=t,i.series.labels=c,n.plot(r,[h],i)):n(r).html('<div class="alert alert-info">No Data Found<\/div>')},bindTooltip:function(t,i){var u="tooltip_"+t,f="#"+t,r;n("<div id="+u+" class='tooltip top'><div class='tooltip-inner'><\/div><div class='tooltip-arrow'><\/div><\/div>").css({position:"absolute",display:"none"}).appendTo("body");r=n("#"+u);n(f).bind("plothover",function(t,u,f){var e,h;if(f){e="";i?e=i(f):(f.series.chartData&&(f.series.chartData[f.dataIndex].DateTimeStamp&&(e=new Date(f.series.chartData[f.dataIndex].DateTimeStamp).toLocaleDateString()),f.series.chartData[f.dataIndex].StartDateTimeStamp&&(e=new Date(f.series.chartData[f.dataIndex].StartDateTimeStamp).toLocaleDateString()),f.series.chartData[f.dataIndex].EndDateTimeStamp&&(e+=" to "+new Date(f.series.chartData[f.dataIndex].EndDateTimeStamp).toLocaleDateString()),f.series.chartData[f.dataIndex].MetricTitle&&(e=f.series.chartData[f.dataIndex].MetricTitle)),e&&(e+="<br />"),f.series.label&&(e+=f.series.label),f.series.chartData&&(h=f.series.chartData[f.dataIndex].YValueFormatted||f.series.chartData[f.dataIndex].YValue||f.series.chartData[f.dataIndex].YValueTotal||"",e+=": "+h,f.series.chartData[f.dataIndex].Note&&(e+="<br />"+f.series.chartData[f.dataIndex].Note)));r.find(".tooltip-inner").html(e);var c=u.pageY-r.height()-10,l=n(window).width(),s=r.width(),o=u.pageX-s/2;o+s+10>=l?(o=o-s/2,r.removeClass("top"),r.addClass("left")):(r.removeClass("left"),r.addClass("top"));r.css({top:c,left:o,opacity:1});r.show()}else r.hide()})}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.connectionRequestBoard=function(){let u="";const p=function(t){n(".js-connection-board-loading").show(t)},w=function(){n(".js-connection-board-loading").hide()},b=function(n,t,i){return Rock.settings.get("baseUrl")+"api/ConnectionRequests/DoesStatusChangeCauseWorkflows/"+n+"/"+t+"/"+i},k=function(n){return Rock.settings.get("baseUrl")+"api/ConnectionRequests/ConnectionBoardStatusViewModels/"+n},d=function(n){return Rock.settings.get("baseUrl")+"api/ConnectionRequests/ConnectionBoardRequestViewModel/"+n},g=function(n){return Rock.settings.get("baseUrl")+"api/ConnectionRequests/"+n},c=function(n,t,i){bootbox.dialog({message:n,buttons:{ok:{label:"OK",className:"btn-primary",callback:t},cancel:{label:"Cancel",className:"btn-default",callback:i}}})},nt=function(){return f||(f=n("#js-template-column").html()),f};let f="";const tt=function(n){return a(nt(),n)},it=function(){return e||(e=n("#js-template-card").html()),e};let e="";const l=function(n){return a(it(),n)},rt=function(){return o||(o=n("#js-template-column-sentry").html()),o};let o="";const a=function(n,t){const i=Object.keys(t);for(let r=0;r<i.length;r++){const u=i[r];n=n.replace(new RegExp("{{"+u+"}}","g"),t[u])}return n},ut=function(t,i){const u=k(t.connectionOpportunityId),r={sortProperty:t.sortProperty||"Order",maxRequestsPerStatus:t.maxCardsPerColumn,statusIconsTemplate:t.statusIconsTemplate};t.connectorPersonAliasId&&(r.connectorPersonAliasId=t.connectorPersonAliasId);t.minDate&&(r.minDate=t.minDate);t.campusId&&(r.campusId=t.campusId);t.maxDate&&(r.maxDate=t.maxDate);t.requesterPersonAliasId&&(r.requesterPersonAliasId=t.requesterPersonAliasId);t.statusIds&&t.statusIds.length&&(r.delimitedStatusIds=t.statusIds.join("|"));t.connectionStates&&t.connectionStates.length&&(r.delimitedConnectionStates=t.connectionStates.join("|"));t.pastDueOnly&&(r.pastDueOnly=!0);t.lastActivityTypeIds&&t.lastActivityTypeIds.length&&(r.delimitedLastActivityTypeIds=t.lastActivityTypeIds.join("|"));n.get({url:u,data:r,success:i})},ft=function(t,i){const u=d(t.connectionRequestId),r={statusIconsTemplate:t.statusIconsTemplate};t.connectorPersonAliasId&&(r.connectorPersonAliasId=t.connectorPersonAliasId);t.minDate&&(r.minDate=t.minDate);t.campusId&&(r.campusId=t.campusId);t.maxDate&&(r.maxDate=t.maxDate);t.requesterPersonAliasId&&(r.requesterPersonAliasId=t.requesterPersonAliasId);t.statusIds&&t.statusIds.length&&(r.delimitedStatusIds=t.statusIds.join("|"));t.connectionStates&&t.connectionStates.length&&(r.delimitedConnectionStates=t.connectionStates.join("|"));t.pastDueOnly&&(r.pastDueOnly=!0);t.lastActivityTypeIds&&t.lastActivityTypeIds.length&&(r.delimitedLastActivityTypeIds=t.lastActivityTypeIds.join("|"));n.get({url:u,data:r,success:i})},et=function(t,i){const r=g(t);n.ajax({url:r,type:"DELETE",success:i})},ot=function(t,i,r,u){if(i===r){u(!1);return}const f=b(t,i,r);n.get({url:f,success:u})},st=function(n){n&&n.connectionRequestId&&ft(n,function(t){lt(n.connectionRequestId,t)})},s=function(r,u,f){const s=n("[data-status-id="+u+"]"),e=n("[data-request-id="+r+"]"),l=e.closest("[data-status-id]"),h=Number(l.attr("data-status-id"));e.remove();const c=f-1,o=c?s.find("[data-index="+c+"]"):null;o&&o.length?o.after(e):s.prepend(e);t(u);i(u,1);t(h);i(h,-1)},i=function(t,i){if(i){const r=n("[data-status-id="+t+"]").closest(".board-column").find(".board-count");if(r.length){const u=Number(r.text())+i;r.text(u||0)}}},t=function(t){n("[data-status-id="+t+"] [data-request-id]").each(function(t,i){const r=n(i);r.attr("data-index",t+1)})},ht=function(n){p(function(){ut(n,function(n){ct(n);w()})})},ct=function(i){if(i&&Array.isArray(i)){const r=n(".js-column-container");r.empty();for(let u=0;u<i.length;u++){const f=i[u],e=n(tt(f)),o=e.find(".js-card-container");for(let n=0;n<f.Requests.length;n++){const t=f.Requests[n],i=l(t);o.append(i)}f.Requests.length<f.RequestCount&&o.append(rt());r.append(e);t(f.Id)}n("[data-toggle=tooltip]").tooltip();pt()}},lt=function(i,r){const u=n("[data-request-id="+i+"]");if(!r){u.remove();return}const e=Number(u.closest("[data-status-id]").data("statusId")),f=r.StatusId,h=e&&e!==f,o=l(r);if(!u.length){const i=n("[data-status-id="+f+"]");i.prepend(o);t(r.StatusId);return}u.replaceWith(o);h?s(r.Id,f,1):t(r.StatusId)},at=function(t){n("[data-request-id="+t+"]").remove()},vt=function(n){c("Are you sure you want to delete this request?",function(){et(n,function(){at(n)})})},yt=function(){if(!v){v=!0;n("body").on("click",".js-board-card-content",dt);n(".js-btn-group-mega").each(function(){const t=n(this),i=t.children(".js-dropdown-toggle").first().position().top+t.height();t.children(".js-dropdown-menu-mega").first().css("top",i)})}};let v=!1;const pt=function(){var t=dragula(n(".js-card-container, .js-drag-scroll-zone").get(),{revertOnSpill:!0,moves:function(t){return n(t).hasClass("js-board-card")}});t.on("drop",kt);t.on("over",wt);t.on("out",bt)},wt=function(t,i){const r=n(i);if(r.hasClass("js-drag-scroll-zone")){let u=0,f=0;if(r.hasClass("js-drag-scroll-zone-left"))f=-10;else if(r.hasClass("js-drag-scroll-zone-right"))f=10;else if(r.hasClass("js-drag-scroll-zone-top"))u=-5;else if(r.hasClass("js-drag-scroll-zone-bottom"))u=5;else return;clearInterval(h);h=setInterval(function(){if(f){const t=n(".js-dragscroll");t.scrollLeft(t.scrollLeft()+f)}else if(u){const n=r.siblings(".js-card-container");n.scrollTop(n.scrollTop()+u)}},15)}};let h=null;const bt=function(){clearInterval(h)},kt=function(u,f,e){const a=n(f),w=n(e),v=n(u),o=a.data("statusId"),h=w.data("statusId"),y=a.children().index(u),p=Number(v.attr("data-index")),l=v.data("requestId"),b=v.data("opportunityId");if(a.hasClass("js-drag-scroll-zone")){s(l,h,p);return}ot(b,h,o,function(n){if(n&&n.DoesCauseWorkflows){const u=n.FromStatusName?n.FromStatusName:"that status",f=n.ToStatusName?n.ToStatusName:"this status",e='Changing the status from "'+u+'" to "'+f+'" will trigger workflows to launch. Do you wish to continue with this change?';c(e,function(){r("card-drop-confirmed",l,o,y);i(o,1);t(o);i(h,-1);t(h)},function(){s(l,h,p)})}else r("card-drop-confirmed",l,o,y),i(o,1),t(o),i(h,-1),t(h)})},dt=function(t){const i=n(t.target),u=i.closest("[data-request-id]").data("requestId");if(u){if(i.closest(".js-delete").length){vt(u);return}if(i.closest(".js-view").length){r("view",u);return}if(i.closest(".js-connect").length){r("connect",u);return}i.closest("button").length||i.closest("a").length||r("view",u)}},r=function(){if(u){const n=Array.prototype.slice.call(arguments).join("|"),t="javascript:__doPostBack("+JSON.stringify(u)+", "+JSON.stringify(n)+")";window.location=t}},gt=function(){r("on-following-change")},ni=function(t){if(!t||!t.connectionOpportunityId||!t.controlClientId)throw"A valid options object is required";const i=JSON.stringify(t),r=n(".js-column-container > *").length>0;i===y&&r||(y=i,u=t.controlClientId,ht(t),dragscroll.reset(),yt())};let y="";return{initialize:ni,fetchAndRefreshCard:st,onFollowingChange:gt}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.datePartsPicker=function(){return{initialize:function(n){if(!n.id)throw"id is required";},clientValidate:function(t,i){var r=n(t).closest(".js-datepartspicker"),f=Number(r.find(".js-month").val()),e=Number(r.find(".js-day").val()),o=Number(r.find(".js-year").val()),a=r.attr("data-required")=="true",v=r.attr("data-requireyear")=="true",y=r.attr("data-allowFuture")=="true",s=r.attr("data-itemlabel"),u=!0,c,l,h;y||f&&e&&o&&(c=new Date(o,f-1,e),l=new Date,c>l&&(u=!1,t.errormessage=s+" cannot be a future date."));f&&e&&(o||!v)||(f||e||o?(u=!1,t.errormessage=s+" must be a valid value."):a&&(u=!1,t.errormessage=s+" is required."));h=r;u?h.removeClass("has-error"):h.addClass("has-error");i.IsValid=u}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.datePicker=function(){return{initialize:function(t){var r;if(!t.id)throw"id is required";r="mm/dd/yyyy";t.format&&(r=t.format);var i=n("#"+t.id),u=i.closest(".js-date-picker-container"),f=i.closest(".input-group.js-date-picker"),e=f.datepicker({format:r,assumeNearbyYear:10,autoclose:!0,todayBtn:"linked",forceParse:t.forceParse,startDate:t.startDate,endDate:t.endDate||new Date(864e13),startView:t.startView,showOnFocus:t.showOnFocus,todayHighlight:t.todayHighlight,zIndexOffset:1050});e.on("change",function(){t.postbackScript&&(window.location="javascript:"+t.postbackScript)});f.find(".input-group-addon").on("click",function(){n(this).siblings(".form-control").select()});u.find(".js-current-date-checkbox").on("click",function(){var t=u.find(".js-current-date-offset"),r=n("label[for='"+t.attr("id")+"']");n(this).is(":checked")?(r.show(),t.show(),i.data("last-value",i.val()).val("Current").prop("disabled",!0).addClass("aspNetDisabled")):(r.hide(),t.hide(),i.val(i.data("last-value")).prop("disabled",!1).removeClass("aspNetDisabled"))})}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.dateRangePicker=function(){return{initialize:function(n){if(!n.id)throw"id is required";},clientValidate:function(t,i){var r=n(t).closest(".js-daterangepicker"),e=r.find(".js-lower input").val(),o=r.find(".js-upper input").val(),s=r.attr("data-required")=="true",h=r.attr("data-itemlabel"),u=!0,f;s&&e.length==0&&o.length==0&&(u=!1,t.errormessage=h+" is required");f=r;u?f.removeClass("has-error"):f.addClass("has-error");i.IsValid=u}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.dateTimePicker=function(){return{initialize:function(t){var u,i,f;if(!t.id)throw"id is required";u="mm/dd/yyyy";t.format&&(u=t.format);var r=n("#"+t.id+" .js-datetime-date"),e=r.closest(".js-datetime-picker-container"),o=r.closest(".input-group.date");o.datepicker({format:u,assumeNearbyYear:10,autoclose:!0,todayBtn:"linked",startView:t.startView||"month",todayHighlight:t.todayHighlight||!0,zIndexOffset:1050});o.find(".input-group-addon").on("click",function(){n(this).siblings(".form-control").select()});i=n("#"+t.id+" .js-datetime-time");i&&(f=i.attr("id"),f&&Rock.controls.timePicker.initialize({id:f}));e.find(".js-current-datetime-checkbox").on("click",function(){var t=e.find(".js-current-datetime-offset"),u=n("label[for='"+t.attr("id")+"']");n(this).is(":checked")?(u.removeClass("aspNetDisabled").show(),t.show(),t.prop("disabled",!1).removeClass("aspNetDisabled").val(t.data("last-value")),r.data("last-value",r.val()).val("").prop("disabled",!0).addClass("aspNetDisabled").prop("placeholder","Current"),i.data("last-value",i.val()).val("").prop("disabled",!0).addClass("aspNetDisabled")):(u.addClass("aspNetDisabled").hide(),t.data("last-value",t.val()).hide(),t.val("").prop("disabled",!0).addClass("aspNetDisabled"),r.prop("disabled",!1).removeClass("aspNetDisabled").prop("placeholder","").val(r.data("last-value")),i.prop("disabled",!1).removeClass("aspNetDisabled").val(i.data("last-value")))})}}}()}(jQuery),function(n){"use strict";n.Application.add_load(function(){var n=function(){var n=$(this).attr("onchange"),t=$(this).attr("onclick"),i;(n&&n.indexOf("__doPostBack")>0||t&&t.indexOf("__doPostBack")>0)&&(i=$(this).closest(".js-block-instance").find("a"),i.attr("disabled","disabled").prop("disabled",!0).attr("disabled","disabled").addClass("disabled"))};$("select.js-prevent-double-postback,input.js-prevent-double-postback").on("change",n);$('.js-prevent-double-postback input[type="radio"]').on("click",n)})}(Sys),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.fileUploader=function(){var t=function(t){t.isBinaryFile=t.isBinaryFile||"T";t.uploadUrl=t.uploadUrl||"FileUploader.ashx";var i=Rock.settings.get("baseUrl")+t.uploadUrl+"?isBinaryFile="+t.isBinaryFile;i+=t.isBinaryFile=="T"?"&fileId="+t.fileId+"&fileTypeGuid="+t.fileTypeGuid:"&rootFolder="+(encodeURIComponent(t.rootFolder)||"");t.isTemporary=="F"&&(i+="&IsTemporary=False");n("#"+t.controlId).fileupload({url:i,dataType:"json",dropZone:n("#"+t.controlId).closest(".fileupload-dropzone"),autoUpload:!0,submit:t.submitFunction,sequentialUploads:!0,start:function(){var i=n("#"+t.controlId).closest(".fileupload-group");i.find(".js-upload-progress").rockFadeIn()},progressall:function(i,r){var e,u,f;try{if(r.total>0){if(e=n("#"+t.controlId).closest(".fileupload-group"),u=e.find(".js-upload-progress-percent"),!u.length)return;f=(r.loaded*100/r.total).toFixed(0);f>1&&f<99?u.text(f+"%"):u.text("")}}catch(o){}},stop:function(){var i=n("#"+t.controlId).closest(".fileupload-group");i.find(".js-upload-progress").hide();i.find(".fileupload-dropzone").show()},done:function(i,r){var f=n("#"+t.aFileName),u;(t.isBinaryFile||"T")=="F"?n("#"+t.hfFileId).val(r.response().result.FileName):n("#"+t.hfFileId).val(r.response().result.Id);u=Rock.settings.get("baseUrl")+"GetFile.ashx?isBinaryFile="+(t.isBinaryFile||"T")+"&rootFolder="+(encodeURIComponent(t.rootFolder)||"")+"&id="+r.response().result.Id+"&fileName="+r.response().result.FileName;f.text(r.response().result.FileName).attr("href",u);n("#"+t.aRemove).show();t.postbackScript&&(window.location="javascript:"+t.postbackScript);t.doneFunction&&t.doneFunction(i,r)},fail:function(i,r){var e=n("#"+t.controlId).closest(".fileupload-group"),f,u;e.siblings(".js-rockupload-alert").remove();f=n('<div class="alert alert-warning alert-dismissable js-rockupload-alert"/>');u="unable to upload";r.response().jqXHR&&r.response().jqXHR.status==406?u="file type not allowed":r.response().jqXHR&&r.response().jqXHR.responseText&&(u=r.response().jqXHR.responseText);t.maxUploadBytes&&r.total&&r.total>=t.maxUploadBytes&&(u="file size is limited to "+t.maxUploadBytes/1048576+"MB");f.append('<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;<\/button>').append('<strong><i class="fa fa-exclamation-triangle"><\/i> Warning <\/strong>').append(u);f.insertBefore(e)}});n("#"+t.aRemove).on("click",function(){n(this).hide();var i=n("#"+t.aFileName);return i.attr("href","#"),i.text(""),i.removeClass("file-exists"),t.postbackRemovedScript?window.location="javascript:"+t.postbackRemovedScript:n("#"+t.hfFileId).val("0"),!1})};return{initialize:function(n){if(!n.controlId)throw"Control ID must be set.";t(n)}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.followingsToggler=function(){return{initialize:function(t,i,r,u,f,e,o){var s=typeof o=="function";t.on("click",function(){if(t.hasClass("following"))n.ajax({type:"DELETE",url:Rock.settings.get("baseUrl")+"api/followings/"+i+"/"+r+"/"+f+"?purposeKey="+encodeURIComponent(u),success:function(){t.removeClass("following");t.attr("data-original-title")&&t.attr("data-original-title","Click to follow");s&&o(!1,t,i,r,f,e)}});else{var h={EntityTypeId:i,EntityId:r,PersonAliasId:e,PurposeKey:u};n.ajax({type:"POST",contentType:"application/json",data:JSON.stringify(h),url:Rock.settings.get("baseUrl")+"api/followings",statusCode:{201:function(){t.addClass("following");t.attr("data-original-title")&&t.attr("data-original-title","Currently following");s&&o(!0,t,i,r,f,e)}}})}})}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.fullScreen=function(){return{initialize:function(t){n(".js-fullscreen-trigger").on("click",function(i){i.preventDefault();var r=n(this).closest(".block-instance")[0]||document.documentElement;t&&(r=n(t)[0]);Rock.controls.fullScreen.toggleFullscreen(r)})},toggleFullscreen:function(t){t=t||document.documentElement;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(t.requestFullscreen?(t.requestFullscreen(),document.addEventListener("fullscreenchange",this.exitHandler,!1)):t.msRequestFullscreen?(t.msRequestFullscreen(),document.addEventListener("MSFullscreenChange",exitHandler,!1)):t.mozRequestFullScreen?(t.mozRequestFullScreen(),document.addEventListener("mozfullscreenchange",exitHandler,!1)):t.webkitRequestFullscreen&&(t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),document.addEventListener("webkitfullscreenchange",exitHandler,!1)),n(t).addClass("is-fullscreen"))},exitHandler:function(t){document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||(n(t.target).removeClass("is-fullscreen"),document.dispatchEvent(new Event("RockExitFullscreen")))}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.geoPicker=function(){var i=function(t){var i=this;i.controlId=t.controlId;i.restUrl=t.restUrl;i.path=t.path;i.centerAddress=t.centerAddress;i.centerLatitude=t.centerLatitude||"33.590795";i.centerLongitude=t.centerLongitude||"-112.126459";i.drawingMode=t.drawingMode||"Polygon"||"Point";i.strokeColor=t.strokeColor||"#0088cc";i.fillColor=t.fillColor||"#0088cc";i.styles=t.mapStyle;i.pathTemp=null;i.selectedShape=null;i.minLat=null;i.maxLat=null;i.minLng=null;i.maxLng=null;i.map=null;i.drawingManager=null;this.initMinMaxLatLng=function(){i.minLat=null;i.maxLat=null;i.minLng=null;i.maxLng=null};this.clearSelection=function(){i.selectedShape&&(i.drawingMode=="Polygon"&&i.selectedShape.setEditable(!1),i.selectedShape=null);n("#gmnoprint-delete-button_"+i.controlId).attr("disabled","");n("#gmnoprint-delete-button_"+i.controlId+" .fa-times").css("color","#aaa")};this.setSelection=function(t,r){var s,u,f,e,o;if(i.clearSelection(),s=n("#gmnoprint-delete-button_"+i.controlId),n("#gmnoprint-delete-button_"+i.controlId).prop("disabled",!1),n("#gmnoprint-delete-button_"+i.controlId+" .fa-times").css("color",""),i.selectedShape=t,r=="polygon"){for(t.setEditable(!0),u=[],f=t.getPaths().getAt(0),e=0;e<f.length;e++)o=f.getAt(e),u[e]=o.toUrlValue();i.path=f.getAt(0).toUrlValue()!=u[u.length-1]?u.join("|")+"|"+f.getAt(0).toUrlValue():u.join("|")}else r=="marker"&&(i.path=t.getPosition().toUrlValue())};this.deleteSelectedShape=function(){i.selectedShape&&confirm("Delete selected shape?")&&(i.selectedShape.setMap(null),i.clearSelection(),i.path=null,i.drawingManager.setOptions({drawingControlOptions:{drawingModes:i.getDrawingModes()}}))};this.getDrawingModes=function(){return i.drawingMode=="Polygon"?[google.maps.drawing.OverlayType.POLYGON]:i.drawingMode=="Point"?[google.maps.drawing.OverlayType.MARKER]:void 0};this.getMarkerImage=function(){return{path:"M 0,0 C -2,-20 -10,-22 -10,-30 A 10,10 0 1,1 10,-30 C 10,-22 2,-20 0,0 z",fillColor:"#FE7569",fillOpacity:1,strokeColor:"#000",strokeWeight:1,scale:1,labelOrigin:new google.maps.Point(0,-28)}};this.fitBounds=function(){var r,t,u,n;if(!i.path){r=new google.maps.LatLng(parseFloat(i.centerLatitude),parseFloat(i.centerLongitude));i.map.setCenter(r);return}for(t=i.path.split("|"),u=[],n=0;n<t.length;n++){var f=t[n].split(","),e=parseFloat(f[0]),o=parseFloat(f[1]);i.findBounds(e,o);u.push(new google.maps.LatLng(e,o))}var s=new google.maps.LatLng(i.minLat,i.minLng),h=new google.maps.LatLng(i.maxLat,i.maxLng),c=new google.maps.LatLngBounds(s,h);i.map.fitBounds(c);i.drawingMode=="Point"&&i.map.setZoom(16)};this.findBounds=function(n,t){(!i.minLat||n<i.minLat)&&(i.minLat=n);(!i.maxLat||n>i.maxLat)&&(i.maxLat=n);(!i.minLng||t<i.minLng)&&(i.minLng=t);(!i.maxLng||t>i.maxLng)&&(i.maxLng=t)};this.disableDrawingManager=function(){i.drawingManager&&(i.drawingManager.setDrawingMode(null),i.drawingManager.setOptions({drawingControlOptions:{drawingModes:[]}}))};this.plotPath=function(t){var f,u,e,h,r,o;if(i.initMinMaxLatLng(),i.path){for(f=i.path.split("|"),u=[],e=0;e<f.length;e++){var s=f[e].split(","),c=parseFloat(s[0]),l=parseFloat(s[1]);u.push(new google.maps.LatLng(c,l))}h=n("#selectedGeographyLabel_"+this.controlId);i.toAddress(u[0],h);f.length>0&&(i.drawingMode=="Polygon"?(r=new google.maps.Polygon({path:u,clickable:!0,editable:!0,strokeColor:i.strokeColor,fillColor:i.fillColor,strokeWeight:2}),r.setMap(t),i.setSelection(r,google.maps.drawing.OverlayType.POLYGON),i.disableDrawingManager(),google.maps.event.addListener(r.getPath(),"set_at",function(){i.setSelection(r,google.maps.drawing.OverlayType.POLYGON)}),google.maps.event.addListener(r.getPath(),"insert_at",function(){i.setSelection(r,google.maps.drawing.OverlayType.POLYGON)}),google.maps.event.addListener(r,"rightclick",function(n){n.vertex!=null&&r.getPath().removeAt(n.vertex);i.setSelection(r,google.maps.drawing.OverlayType.POLYGON)}),google.maps.event.addListener(r,"click",function(){i.setSelection(r,google.maps.drawing.OverlayType.POLYGON)})):i.drawingMode=="Point"&&(o=new google.maps.Marker({position:u[0],map:t,clickable:!0,icon:i.getMarkerImage()}),i.setSelection(o,google.maps.drawing.OverlayType.MARKER),i.disableDrawingManager(),google.maps.event.addListener(o,"click",function(){i.setSelection(o,google.maps.drawing.OverlayType.MARKER)})))}};this.toAddress=function(n,t){if(!n||isNaN(n.lat())||isNaN(n.lng())){t.text("");return}var i=new google.maps.Geocoder;i=i.geocode({latLng:n},function(n,i){i==google.maps.GeocoderStatus.OK?n[0]&&t.text("near "+n[0].formatted_address):(t.html("<i>selected<\/i>"),console.log("Geocoder failed due to: "+i))})};this.centerMapOnAddress=function(){var t=this,n;i.centerAddress&&(n=new google.maps.Geocoder,n.geocode({address:i.centerAddress},function(n,i){i==google.maps.GeocoderStatus.OK?t.map.setCenter(n[0].geometry.location):console.log("Geocode was not successful for the following reason: "+i)}))};this.firstPoint=function(){var n;if(i.path&&(n=i.path.split("|"),n)){var t=n[0].split(","),r=parseFloat(t[0]),u=parseFloat(t[1]);return new google.maps.LatLng(r,u)}}},t;return i.prototype.initializeEventHandlers=function(){var i=this.controlId,r=n("#"+this.controlId),u=n("#hfGeoPath_"+this.controlId),f=this.restUrl,t=this;n("#"+i+" a.picker-label").on("click",function(r){r.preventDefault();var u=n("#"+i);n(this).toggleClass("active");u.find(".picker-menu").first().toggle(0,function(){Rock.dialogs.updateModalScrollBar(i)});u.find(".picker-menu").first().is(":visible")&&(google.maps.event.trigger(t.map,"resize"),t.fitBounds(),n("html,body").animate({scrollTop:u.offset().top},1e3))});r.closest(".modal").length&&n("#btnExpandToggle_"+i).hide();n("#btnExpandToggle_"+i).on("click",function(){var i=n("#geoPicker_"+t.controlId),r=i.data("fullscreen");n(this).children("i").toggleClass("fa-expand",r);n(this).children("i").toggleClass("fa-compress",!r);r?(i.data("fullscreen",!1),n(this).closest(".picker-menu").css({position:"absolute",top:0,left:0,height:"",width:520}),i.css({height:300,width:500}),n("#gmnoprint-delete-button_"+t.controlId).css({left:"200px"})):(i.data("fullscreen",!0),n(this).closest(".picker-menu").css({position:"fixed",top:0,left:0,height:"100%",width:"100%"}),i.css({height:"85%",width:"100%"}),n("#gmnoprint-delete-button_"+t.controlId).css({left:"200px"}));google.maps.event.trigger(t.map,"resize");t.fitBounds();Rock.dialogs.updateModalScrollBar(t.controlId)});n("#btnCancel_"+i).on("click",function(){n(this).closest(".picker-menu").slideUp(function(){Rock.dialogs.updateModalScrollBar(i)});t.path=t.pathTemp;t.selectedShape&&(t.selectedShape.setMap(null),t.clearSelection(),t.drawingManager.setOptions({drawingControlOptions:{drawingModes:t.getDrawingModes()}}));t.plotPath(t.map)});u.val()&&u.val()!=="0"&&(r.find(".picker-select-none").addClass("rollover-item"),r.find(".picker-select-none").show());n("#btnSelect_"+i).on("click",function(){var o=n("#"+i).find("input:checked"),e=t.path,f=n("#selectedGeographyLabel_"+i);u.val(t.path);r.find(".picker-select-none").addClass("rollover-item");r.find(".picker-select-none").show();f.val(e);t.toAddress(t.firstPoint(),f);t.initMinMaxLatLng();n(this).closest(".picker-menu").slideUp(function(){Rock.dialogs.updateModalScrollBar(i)})});r.find(".picker-select-none").on("click",function(f){f.stopImmediatePropagation();var e=n("#selectedGeographyLabel_"+i);return u.val(""),r.find(".picker-select-none").removeClass("rollover-item"),r.find(".picker-select-none").hide(),e.val(""),t.toAddress(null,e),t.initMinMaxLatLng(),!1})},i.prototype.initialize=function(){var t=this,e=n("#geoPicker_"+t.controlId),f=n("#hfGeoPath_"+this.controlId),i="gmnoprint-delete-button_"+t.controlId,r,u;t.path=f.val();t.pathTemp=t.path;r=new google.maps.StyledMapType(t.styles,{name:"Styled Map"});u={center:new google.maps.LatLng(parseFloat(t.centerLatitude),parseFloat(t.centerLongitude)),zoom:13,streetViewControl:!1,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}};t.centerMapOnAddress();t.map=new google.maps.Map(document.getElementById("geoPicker_"+t.controlId),u);t.map.mapTypes.set("map_style",r);t.map.setMapTypeId("map_style");t.plotPath(t.map);t.drawingManager=new google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{drawingModes:t.getDrawingModes()},polygonOptions:{editable:!0,strokeColor:t.strokeColor,fillColor:t.fillColor,strokeWeight:2},markerOptions:{icon:t.getMarkerImage()}});t.drawingManager.setMap(t.map);t.path&&t.disableDrawingManager();google.maps.event.addListener(t.drawingManager,"overlaycomplete",function(n){if(n.type==google.maps.drawing.OverlayType.POLYGON||n.type==google.maps.drawing.OverlayType.MARKER){t.disableDrawingManager();var i=n.overlay;i.type=n.type;google.maps.event.addListener(i,"click",function(){t.setSelection(i,n.type)});t.setSelection(i,n.type);google.maps.event.addListener(i,"rightclick",function(n){n.vertex!=null&&i.getPath().removeAt(n.vertex);obj.setSelection(i,google.maps.drawing.OverlayType.POLYGON)})}});google.maps.event.addListener(t.drawingManager,"drawingmode_changed",t.clearSelection);google.maps.event.addListener(t.map,"click",t.clearSelection);google.maps.event.addListenerOnce(t.map,"idle",function(){n("#"+i).fadeIn();google.maps.event.addDomListener(document.getElementById(i),"click",t.deleteSelectedShape)});t.initializeEventHandlers();Rock.dialogs.updateModalScrollBar(t.controlId)},t={googleMapsLoadCallback:function(){n.each(Rock.controls.geoPicker.geoPickerOptions,function(n,t){var r=Rock.controls.geoPicker.geoPickers[t.controlId];r||(r=new i(t),Rock.controls.geoPicker.geoPickers[t.controlId]=r,r.initialize())})},geoPickers:{},geoPickerOptions:{},findControl:function(n){return t.geoPickers[n]},initialize:function(i){if(!i.controlId)throw"`controlId` is required.";t.geoPickerOptions[i.controlId]=i;n(window).on("googleMapsIsLoaded",this.googleMapsLoadCallback);typeof google!="undefined"&&(t.geoPickers[i.controlId]=null,n(window).trigger("googleMapsIsLoaded"))}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.groupPlacementTool=function(){return{initialize:function(t){var i,r,e,u,f,o;if(!t.id)throw"id is required";(i=this,r=n("#"+t.id),r.length!=0)&&(e=r.closest(".block-instance")[0],i.$groupPlacementTool=r,i.$registrantList=n(".js-group-placement-registrant-list",r),i.$groupList=n(".js-placement-groups"),i.registrationTemplatePlacementId=parseInt(n(".js-registration-template-placement-id",i.$groupPlacementTool).val())||null,i.allowMultiplePlacements=n(".js-registration-template-placement-allow-multiple-placements",i.$groupPlacementTool).val()=="true",i.registrationInstanceId=parseInt(n(".js-registration-instance-id",i.$groupPlacementTool).val())||null,i.groupMemberDetailUrl=n(".js-group-member-detail-url",i.$groupPlacementTool).val(),i.groupDetailUrl=n(".js-group-detail-url",i.$groupPlacementTool).val(),i.$groupMemberTemplate=n(".js-group-member-template",i.$groupPlacementTool).find(".js-group-member"),i.$toggleRegistrantDetails=n(".js-toggle-registrant-details",i.$groupPlacementTool),i.blockId=n(".js-block-id",i.$groupPlacementTool).val(),i.groupDetailUrl==""?n(".js-edit-group",i.$groupPlacementTool).remove():n(".js-edit-group",i.$groupPlacementTool).each(function(t,r){var u=n(r).closest(".js-placement-group").find(".js-placement-group-id").val();n(r).attr("href",i.groupDetailUrl+"?GroupId="+u)}),i.groupMemberDetailUrl==""&&n(".js-edit-group-member",i.$groupPlacementTool).remove(),i.registrationTemplatePlacementId!=null)&&(i.showRegistrantInstanceName=n(".js-registration-template-show-instance-name",i.$groupPlacementTool).val()=="true",i.registrationInstanceId&&(i.showRegistrantInstanceName=!1),i.showAllRegistrantDetails=!1,i.highlightGenders=n(".js-options-highlight-genders",i.$groupPlacementTool).val()=="true",i.hideFullGroups=n(".js-options-hide-full-groups",i.$groupPlacementTool).val()=="true",u=[],u.push(r.find(".js-group-placement-registrant-container")[0]),f=r.find(".js-group-role-container").toArray(),n.each(f,function(n){u.push(f[n])}),i.registrantListDrake=dragula(u,{isContainer:function(){return!1},moves:function(){return!0},copy:function(n,t){return t.classList.contains("js-group-placement-registrant-container")},accepts:function(t,i,r){return i.classList.contains("js-group-role-container")&&r.classList.contains("js-group-role-container")?(n(t).data("allow-drop",!1),!1):(n(t).data("allow-drop",!0),!0)},invalid:function(t){return n(t).closest(".js-registrant-actions").length},ignoreInputTextSelection:!0,mirrorContainer:e}).on("drag",function(){n("body").addClass("state-drag")}).on("dragend",function(){n("body").removeClass("state-drag")}).on("drop",function(t,r,u){var e,s,f;if(u!=r&&r!=null){if(n(t).data("allow-drop")==!1){n(t).detach().appendTo(n(u));return}if(e=n(t),e.attr("data-has-placement-error")){e.remove();return}if(e.hasClass("js-group-member")){s=e;f=n(u).closest(".js-group-role-members");i.removeGroupMember(s,f);e.remove();return}var o=e,f=n(r).closest(".js-group-role-members"),l=f.closest(".js-placement-group"),a=o.attr("data-registrant-id"),h=l.find(".js-placement-group-id").val(),v=f.find(".js-grouptyperole-id").val(),y=o.attr("data-person-id"),p={IsSystem:!1,GroupId:h,PersonId:y,GroupRoleId:v,GroupMemberStatus:1},c=Rock.settings.get("baseUrl")+"api/RegistrationTemplatePlacements/CanPlaceRegistrant";c+="?registrantId="+a+"&registrationTemplatePlacementId="+i.registrationTemplatePlacementId+"&groupId="+h;n.ajax({method:"GET",url:c}).done(function(){var t=Rock.settings.get("baseUrl")+"api/GroupMembers";n.ajax({method:"POST",url:t,data:p}).done(function(){i.populateGroupRoleMembers(f)}).fail(function(n){i.showPlaceRegistrantError(f,n,o)})}).fail(function(n){i.showPlaceRegistrantError(f,n,o)})}}),this.initializeEventHandlers(),o=Rock.settings.get("baseUrl")+"api/People/GetBlockUserPreference?blockId="+i.blockId+"&userPreferenceKey=expandRegistrantDetails",n.ajax({method:"GET",url:o}).done(function(n){n||(n="true");i.populateRegistrants(i.$registrantList,n=="true")}),i.populateAllGroupRoleMembers())},checkVisibleRegistrants:function(){var i=this,r=n(".js-no-registrants-div",i.$groupPlacementTool),t=n(".js-group-placement-registrant-container ");t.height()==0?t.addClass("empty"):t.removeClass("empty")},setRegistrantVisibility:function(n,t,i){var e=this,r="[data-person-id="+n+"]",u,f;t!=""&&(r+="[data-registrant-registrationinstanceid="+t+"]");i?(u=e.$registrantList.find(r),u.attr("allow-search","true"),u.show()):(f=e.$registrantList.find(r),f.attr("allow-search","false"),f.hide())},removeGroupMember:function(t,i){var r=this,u=t.attr("data-groupmember-id"),f=Rock.settings.get("baseUrl")+"api/GroupMembers",e=t.attr("data-person-id"),o=t.attr("data-placementgroup-registrationinstanceid");n.ajax({method:"DELETE",url:f+"/"+u}).done(function(){r.setRegistrantVisibility(e,o,!0);r.populateGroupRoleMembers(i);r.checkVisibleRegistrants()}).fail(function(){console.log("fail")})},populateAllGroupRoleMembers:function(){var t=this,i=n(".js-group-role-members",t.$groupPlacementTool).toArray();n.each(i,function(r){var u=n(i[r]);t.populateGroupRoleMembers(u)})},populateGroupRoleMembers:function(t){var i=this,e;n(".js-alert",i.$groupPlacementTool).hide();var o=Rock.settings.get("baseUrl")+"api/GroupMembers",r=t.closest(".js-placement-group"),s=r.find(".js-placement-group-registrationinstanceid").val(),f=t.find(".js-group-role-container"),h=r.find(".js-placement-group-id").val(),c=t.find(".js-grouptyperole-id").val(),u="$filter=";u+="GroupId eq "+h;u+=" and GroupRoleId eq "+c;u+=" and GroupMemberStatus ne 'Inactive' ";e=n(".js-options-displayed-groupmember-attribute-keys",i.$groupPlacementTool).val();e&&(u+="&loadAttributes=simple&attributeKeys="+e);n.get(o+"?"+u+"&$expand=Person",function(u){var e,o,h,a,w,p,v,l,c,y;f.html("");n.each(u,function(n){var r=u[n],t=i.$groupMemberTemplate.clone();i.populateGroupMember(t,r,s);f.append(t)});i.checkVisibleRegistrants();e=parseInt(n(".js-placement-capacity",r).val())||null;o=n(".js-placement-capacity-label",r);e?(h=n(".js-group-member",r).length,o.text(h+" / "+e),a=h/e*100,a>100?o.attr("data-status","over-capacity").attr("title","Group Over Capacity"):a==100?o.attr("data-status","at-capacity").attr("title","Group At Capacity"):a>80?o.attr("data-status","near-capacity").attr("title",e-h+" Spots Remaining"):o.attr("data-status","under-capacity").attr("title",e-h+" Spots Remaining"),i.hideFullGroups&&h>=e&&(w=f.closest(".js-placement-group"),w.hide())):o.attr("data-status","none");p=location.hash;p&&(v=p.replace("#PersonId_",""),v&&n(".js-group-member[data-person-id="+v+"]",f).length&&setTimeout(function(){location.hash="#other";location.hash="#PersonId_"+v},0));l=parseInt(n(".js-grouptyperole-max-members",t).val())||null;c=n(".js-grouptyperole-max-members-label",t);l?(y=u.length,c.text(y+" / "+l),y>l?c.attr("data-status","over-capacity").attr("title","Group role over capacity."):y==l?c.attr("data-status","at-capacity").attr("title","Group role at capacity."):c.attr("data-status","under-capacity").attr("title","Group role under capacity.")):c.attr("data-status","none")})},populateGroupMember:function(t,i,r){var u=this,e,s,o,f;if(t.attr("data-groupmember-id",i.Id),t.attr("data-person-id",i.PersonId),t.attr("data-placementgroup-registrationinstanceid",r),t.find(".js-person-id-anchor").prop("name","PersonId_"+i.PersonId),u.highlightGenders&&t.attr("data-person-gender",i.Person.Gender),t.find(".js-groupmember-name").text(i.Person.NickName+" "+i.Person.LastName),e=t.find(".js-edit-group-member"),e.length&&e.attr("href",u.groupMemberDetailUrl+"?GroupMemberId="+i.Id),u.allowMultiplePlacements==!1&&u.setRegistrantVisibility(i.PersonId,r,!1),i.AttributeValues&&Object.keys(i.AttributeValues).length>0){s=n(".js-groupmember-attributes-container",t);o=n("<dl><\/dl>");for(f in i.Attributes)i.AttributeValues[f].ValueFormatted&&o.append("<dt>"+i.Attributes[f].Name+" <\/dt><dd>"+i.AttributeValues[f].ValueFormatted+"<\/dd>");s.append(o)}else n(".js-groupmember-details",t).hide()},populateRegistrants:function(t,i){var r=this,u=n(".js-group-placement-registrant-container",t),o=Rock.settings.get("baseUrl")+"api/RegistrationRegistrants/GetGroupPlacementRegistrants",f={RegistrantId:parseInt(n(".js-registrant-id",r.$groupPlacementTool).val())||null,RegistrationTemplateId:parseInt(n(".js-registration-template-id",r.$groupPlacementTool).val())||null,RegistrationInstanceId:parseInt(n(".js-registration-instance-id",r.$groupPlacementTool).val())||null,RegistrationTemplatePlacementId:r.registrationTemplatePlacementId,IncludeFees:n(".js-options-include-fees",r.$groupPlacementTool).val(),RegistrantPersonDataViewFilterId:parseInt(n(".js-options-registrant-person-dataviewfilter-id",r.$groupPlacementTool).val())||null,BlockId:r.blockId,FilterFeeId:parseInt(n(".js-options-filter-fee-id",r.$groupPlacementTool).val())||null},e;n(".js-registration-template-instance-id-list",r.$groupPlacementTool).val()!=""&&(f.RegistrationTemplateInstanceIds=JSON.parse(n(".js-registration-template-instance-id-list",r.$groupPlacementTool).val()));n(".js-options-displayed-registrant-attribute-ids",r.$groupPlacementTool).val()!=""&&(f.DisplayedAttributeIds=JSON.parse(n(".js-options-displayed-registrant-attribute-ids",r.$groupPlacementTool).val()));n(".js-options-filter-fee-item-ids",r.$groupPlacementTool).val()!=""&&(f.FilterFeeOptionIds=JSON.parse(n(".js-options-filter-fee-item-ids",r.$groupPlacementTool).val()));e=r.$groupPlacementTool.find(".js-loading-notification");u.html(" ");e.fadeIn();n.ajax({method:"POST",url:o,data:f}).done(function(t){var s,h,f,c,o;if(t!==null){for(s=u.parent(),u.detach(),u.html(""),h=n(".js-registrant-template").find(".js-registrant"),f=0;f<t.length;f++)c=t[f],o=h.clone(),r.populateRegistrantDiv(o,c),u.append(o);s.append(u);r.checkVisibleRegistrants();r.expandOrHideRegistrantDetails(i);setTimeout(function(){e.hide()},0)}}).fail(function(t){console.log("fail:"+t.responseText);n(".ajax-error-message").html(t.responseText);n(".ajax-error").show();e.hide()})},populateRegistrantDiv:function(t,i){var u=this,f,e,o,s,h,r;if(t.attr("data-person-id",i.PersonId),u.highlightGenders&&t.attr("data-person-gender",i.PersonGender),t.attr("data-registrant-id",i.RegistrantId),t.attr("data-registrant-registrationinstanceid",i.RegistrationInstanceId),t.find(".js-registrant-name").text(i.PersonName),u.showRegistrantInstanceName?t.find(".js-registrant-registrationinstance-name").text(i.RegistrationInstanceName):t.find(".js-registration-instance-name-container").remove(),u.allowMultiplePlacements==!1&&i.AlreadyPlacedInGroup&&(t.attr("allow-search","false"),t.hide()),f=t.find(".js-registrant-fees-container"),i.Fees&&Object.keys(i.Fees).length>0){e=n("<dl><\/dl>");for(o in i.Fees)e.append("<dt>"+o+" <\/dt><dd>"+i.Fees[o]+"<\/dd>");f.append(e)}else f.remove();if(s=t.find(".js-registrant-attributes-container"),i.AttributeValues&&Object.keys(i.AttributeValues).length>0){h=n("<dl><\/dl>");for(r in i.Attributes)i.AttributeValues[r].ValueFormatted&&h.append("<dt>"+i.Attributes[r].Name+" <\/dt><dd>"+i.AttributeValues[r].ValueFormatted+"<\/dd>");s.append(h)}else s.remove();t.find(".js-registrant-details").hide()},showPlaceRegistrantError:function(t,i,r){r.remove();var f=this,u=n(".js-placement-place-registrant-error",t);n(".js-alert",f.$groupPlacementTool).not(u).hide();u.find(".js-placement-place-registrant-error-text").text(i.responseJSON&&i.responseJSON.Message||i.responseText);u.show()},expandOrHideRegistrantDetails:function(t){var i=this,r;i.showAllRegistrantDetails=t;r=Rock.settings.get("baseUrl")+"api/People/SetBlockUserPreference?blockId="+i.blockId+"&userPreferenceKey=expandRegistrantDetails&value="+t;n.ajax({method:"POST",url:r});t?(n("i",i.$toggleRegistrantDetails).removeClass("fa-angle-double-down").addClass("fa-angle-double-up"),n(".js-registrant-details").each(function(t,i){var r=n(i);r.text().trim().length!=""&&r.stop().slideDown()})):(n("i",i.$toggleRegistrantDetails).removeClass("fa-angle-double-up").addClass("fa-angle-double-down"),n(".js-registrant-details",i.$groupPlacementTool).stop().slideUp())},initializeEventHandlers:function(){var t=this;t.$groupPlacementTool.on("click",".js-remove-group-member, .js-detach-placement-group, .js-delete-group",function(){var u=n(this).closest(".js-group-member"),e=u.closest(".js-group-role-members"),i,r;if(n(this).hasClass("js-remove-group-member"))t.removeGroupMember(u,e);else if(n(this).hasClass("js-detach-placement-group")){var i=n(this).closest(".js-placement-group"),r=i.find(".js-placement-group-id").val(),f=parseInt(n(".js-registration-instance-id",t.$groupPlacementTool).val())||null;Rock.dialogs.confirm("Are you sure you want to detach this placement group?",function(u){if(u){var e=Rock.settings.get("baseUrl")+"api/RegistrationTemplatePlacements/DetachPlacementGroup";e+="?groupId="+r;e+="&registrationTemplatePlacementId="+t.registrationTemplatePlacementId;f&&(e+="&registrationInstanceId="+f);n.ajax({method:"DELETE",url:e}).done(function(){i.hide()}).fail(function(t){var r=n(".js-placement-group-error",i);r.find(".js-placement-group-error-text").text("Unable to detach group: "+(t.responseJSON&&t.responseJSON.Message||t.responseText));r.show()})}})}else if(n(this).hasClass("js-delete-group"))i=n(this).closest(".js-placement-group"),r=i.find(".js-placement-group-id").val(),Rock.dialogs.confirm("Are you sure you want to delete this group?",function(t){if(t){var u=Rock.settings.get("baseUrl")+"api/Groups?Id="+r;n.ajax({method:"DELETE",url:u}).done(function(){i.hide()}).fail(function(t){var r=n(".js-placement-group-error",i);r.find(".js-placement-group-error-text").text("Unable to delete group: "+(t.responseJSON&&t.responseJSON.Message||t.responseText));r.show()})}});else return});n(".js-registrant-search",t.$groupPlacementTool).on("keyup",function(){var t=n(this).find("input").val().toLowerCase().trim();n(".js-group-placement-registrant-container .js-registrant").filter(function(){var i=n(this);if(i.attr("allow-search")!="false")if(t=="")i.toggle(!0);else{var u=i.find(".js-registrant-name").text(),f=u.split(" "),r=!1;n.each(f,function(n){f[n].toLowerCase().indexOf(t)==0&&(r=!0)});r||u.toLowerCase().indexOf(t)==0&&(r=!0);i.toggle(r)}})});n(".js-group-placement-registrant-list",t.$groupPlacementTool).on("mouseenter",".js-registrant",function(){var t=n(".js-registrant-details",n(this));t.text().trim().length!=""&&t.stop().slideDown()}).on("mouseleave",".js-registrant",function(){t.showAllRegistrantDetails||n(".js-registrant-details",n(this)).stop().slideUp()});n(".js-hide-alert",t.$groupPlacementTool).click(function(){n(this).closest(".js-alert").hide()});n(".js-toggle-registrant-details",t.$groupPlacementTool).click(function(){var n=!t.showAllRegistrantDetails;t.expandOrHideRegistrantDetails(n)});t.$groupPlacementTool.on("click",".js-placement-group-toggle-visibility",function(){n("i",this).toggleClass("fa-chevron-down fa-chevron-up");n(this).closest(".js-placement-group").find(".js-group-details").slideToggle()});n(window).mousemove(function(i){if(t.registrantListDrake.dragging){var u=n(window),e=window.innerHeight,r=u.scrollTop(),o=i.clientY,f=o/e;f>.9?(r+=20,u.scrollTop(r)):f<.1&&r!=0&&(r-=20,u.scrollTop(r))}})}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.groupScheduler=function(){return{initialize:function(t){var i,r,e,u,f;if(!t.id)throw"id is required";(i=this,r=n("#"+t.id),r.length!=0)&&(e=r.closest(".block-instance")[0],i.$groupScheduler=r,i.$resourceList=n(".js-group-scheduler-resourcelist",r),i.$additionalPersonIds=n(".js-resource-additional-person-ids",i.$resourceList),u=[],u.push(r.find(".js-scheduler-source-container")[0]),f=r.find(".js-scheduler-target-container").toArray(),n.each(f,function(n){u.push(f[n])}),i.resourceListDrake=dragula(u,{isContainer:function(){return!1},moves:function(t,i){if(i.classList.contains("js-scheduler-source-container")&&(n(t).data("has-blackout-conflict")||n(t).data("has-requirements-conflict")))return!1;if(i.classList.contains("js-scheduler-target-container")){var r=n(i).closest(".js-occurrence-column"),u=r.data("is-scheduler-target-column");if(!u)return!1}return!0},copy:function(t,i){return i.classList.contains("js-scheduler-source-container")?n(t).data("displayed-time-slot-count")>1:!1},accepts:function(t,i){var o,u,s;if(i.classList.contains("js-scheduler-target-container")){var r=n(t),h=n(i).closest(".js-occurrence-column"),c=h.data("is-scheduler-target-column");if(!c)return!1;var f=r.data("blackout-dates"),e=r.data("occurrenceDate"),l=r.data("displayed-time-slot-count")==1,a=r.data("has-scheduling-conflict");if(l&&a)return!1;if(o=n(i).closest(".js-scheduled-occurrence"),u=new Date(o.find(".js-attendanceoccurrence-date").val()).getTime(),f&&(s=f.map(function(n){return new Date(n).getTime()}),s.includes(u)))return r.data("allow-drop",!1),!1;var v=r.closest(".js-scheduled-occurrence"),e=r.data("occurrenceDate"),y=r.data("hasLocation");if(v.length&&y==0&&e!=u)return r.data("allow-drop",!1),!1}return n(t).data("allow-drop",!0),!0},invalid:function(t){return n(t).closest(".js-resource-actions").length},ignoreInputTextSelection:!0,mirrorContainer:e}).on("drag",function(){n("body").addClass("state-drag")}).on("dragend",function(){n("body").removeClass("state-drag")}).on("drop",function(t,r,u){var o,e,s,h,a;if(u!=r&&r!=null){if(n(t).data("allow-drop")==!1){n(t).detach().appendTo(n(u));return}if(r.classList.contains("js-scheduler-source-container"))o=n(t),o.attr("data-status","unscheduled"),e=o.attr("data-person-id"),s=i.$additionalPersonIds.val().split(","),s.push(e),i.$additionalPersonIds.val(s),h=n(u).closest(".js-scheduled-occurrence"),i.removeResource(o,h,!1);else{var v=Rock.settings.get("baseUrl")+"api/Attendances/ScheduledPersonAddPending",y=Rock.settings.get("baseUrl")+"api/Attendances/ScheduledPersonAddConfirmed",f=n(t),e=f.attr("data-person-id"),c=n(r).closest(".js-scheduled-occurrence").data("attendanceoccurrence-id"),p=Rock.settings.get("baseUrl")+"api/Attendances/CanSchedulePerson",l="?personId="+e+"&attendanceOccurrenceId="+c;u.classList.contains("js-scheduler-target-container")&&(a=n(u).closest(".js-scheduled-occurrence").data("attendanceoccurrence-id"),l+="&fromAttendanceOccurrenceId="+a);n.ajax({method:"GET",url:p+l}).done(function(){var l=n(t).closest(".js-scheduled-occurrence"),r=v,o,s,h;u.classList.contains("js-scheduler-target-container")?(o=f.attr("data-status"),o=="confirmed"&&(r=y),s=n(u).closest(".js-scheduled-occurrence"),i.removeResource(f,s,!1)):f.attr("data-status","pending");h=f.data("displayed-time-slot-count")>1;n.ajax({method:"PUT",url:r+"?personId="+e+"&attendanceOccurrenceId="+c}).done(function(){h?(i.updateSchedulerResource(i.$resourceList,f),i.populateAllScheduledOccurrences()):i.populateScheduledOccurrence(l)}).fail(function(r){var u=n(t).closest(".js-scheduled-occurrence");i.showSchedulePersonError(u,r,f)})}).fail(function(r){var u=n(t).closest(".js-scheduled-occurrence");i.showSchedulePersonError(u,r,f)})}i.trimSourceContainer()}}),this.trimSourceContainer(),this.initializeEventHandlers(),i.populateSchedulerResources(i.$resourceList),i.populateAllScheduledOccurrences())},trimSourceContainer:function(){var t=n(".js-scheduler-source-container");n.trim(t.html())==""&&t.html("")},removeResource:function(t,i,r){var u=this,f=t.attr("data-attendance-id"),e=t.data("displayed-time-slot-count")>1,o=Rock.settings.get("baseUrl")+"api/Attendances/ScheduledPersonRemove";n.ajax({method:"PUT",url:o+"?attendanceId="+f}).done(function(){r?u.populateSchedulerResources(u.$resourceList):u.updateSchedulerResource(u.$resourceList,t);e?u.populateAllScheduledOccurrences():u.populateScheduledOccurrence(i)}).fail(function(t){console.log("fail:"+t.responseText);n(".ajax-error-message").html(t.responseText);n(".ajax-error").show()})},populateAllScheduledOccurrences:function(){var t=this,i=n(".js-scheduled-occurrence",t.$groupScheduler).toArray();n.each(i,function(r){var u=n(i[r]);t.populateScheduledOccurrence(u)})},populateScheduledOccurrence:function(t){var s=Rock.settings.get("baseUrl")+"api/Attendances/GetAttendingSchedulerResources",h=t.data("attendanceoccurrence-id"),f=t.find(".js-scheduler-target-container"),r=t.data("minimum-capacity"),i=t.data("desired-capacity"),a=t.data("maximum-capacity"),u=t.find(".js-scheduling-status"),e=t.find(".js-autoscheduler-warning"),c=new Date(t.data("attendanceoccurrence-date")).getTime(),l=t.data("has-location"),o;i?e.hide():(e.show(),e.tooltip({html:!0}));o=this;n.get(s+"?attendanceOccurrenceId="+h,function(e){var b,h,k,s,d,y,p;f.html("");var a=0,v=0,w=0;t.data("has-location")==0&&(e.length==0?t.hide():t.show());b=f.parent();f.detach();n.each(e,function(t){var r=e[t],i;r.ConfirmationStatus=="confirmed"?v++:r.ConfirmationStatus=="declined"?w++:a++;i=n(".js-scheduled-resource-template").find(".js-resource").clone();i.data("occurrenceDate",c);i.data("hasLocation",l);o.populateResourceDiv(i,r);f.append(i)});b.append(f);h=v+a;k=Math.max(0,i-h);t.attr("data-total-scheduled",h);t.attr("data-empty-spots",k);t.css("--desiredSpots",i);r&&h<r?t.attr("data-status","below-minimum"):i&&h<i?t.attr("data-status","below-desired"):i&&h>=i?t.attr("data-status","meets-desired"):t.attr("data-status","none");s=i;s||(s=h);h>i&&(s=h);d="<div>Confirmed: "+v+"<br/>Pending: "+a+"<br/>Declined: "+w+"<\/div>";u.attr("data-original-title",d);u.tooltip({html:!0});var g=!s||v*100/s,nt=!s||a*100/s,rt=!s||r*100/s,ut=!s||i*100/s,tt=u.find(".js-minimum-indicator"),it=u.find(".js-desired-indicator");i&&r&&r>0?(tt.attr("data-minimum-value",r).css({"margin-left":rt+"%"}).show(),it.attr("data-desired-value",i).css({"margin-left":ut+"%"}).show()):(tt.hide(),it.hide());y=u.find(".js-scheduling-progress-confirmed");y.css({width:g+"%"});y.find(".js-progress-text-percent").val(g);p=u.find(".js-scheduling-progress-pending");p.css({width:nt+"%"});p.find(".js-progress-text-percent").val(nt)})},showSchedulePersonError:function(t,i,r){r.remove();var f=this,u=n(".js-scheduler-schedule-person-error",t);n(".js-alert",f.$groupScheduler).not(u).hide();u.find(".js-scheduler-schedule-person-error-text").text(i.responseJSON&&i.responseJSON.Message||i.responseText);u.show()},updateSchedulerResource:function(t,i){var s=this,r=i.attr("data-person-id"),f=i.attr("data-groupmember-id"),u,e,o;r&&(u=[],n(".js-occurrence-schedule-ids",t).val()!=""&&(u=n(".js-occurrence-schedule-ids",t).val().split(",")),e={AttendanceOccurrenceGroupId:Number(n(".js-occurrence-group-id",t).val()),AttendanceOccurrenceScheduleIds:u,AttendanceOccurrenceSundayDate:n(".js-occurrence-sunday-date",t).val(),ResourceGroupId:n(".js-resource-group-id",t).val(),GroupMemberFilterType:n(".js-resource-groupmemberfiltertype",t).val(),ResourceDataViewId:n(".js-resource-dataview-id",t).val()},o=Rock.settings.get("baseUrl")+"api/Attendances/GetSchedulerResource?personId="+r,n.ajax({method:"POST",url:o,data:e}).done(function(i){var e,u,o;e=f?"[data-groupmember-id="+f+"]":"[data-person-id="+r+"]";u=n(e,t);u.not(":first").remove();o=n(".js-unscheduled-resource-template").find(".js-resource");u.empty();u.html(o.html());s.populateResourceDiv(u,i)}).fail(function(t){console.log("fail:"+t.responseText);n(".ajax-error-message").html(t.responseText);n(".ajax-error").show()}))},populateSchedulerResources:function(t){var u=this,i=n(".js-scheduler-source-container",t),s=Rock.settings.get("baseUrl")+"api/Attendances/GetSchedulerResources",e=[],f,o,r;u.$additionalPersonIds.val()!=""&&(e=u.$additionalPersonIds.val().split(","));f=[];n(".js-occurrence-schedule-ids",t).val()!=""&&(f=n(".js-occurrence-schedule-ids",t).val().split(","));o={AttendanceOccurrenceGroupId:Number(n(".js-occurrence-group-id",t).val()),AttendanceOccurrenceScheduleIds:f,AttendanceOccurrenceSundayDate:n(".js-occurrence-sunday-date",t).val(),ResourceGroupId:n(".js-resource-group-id",t).val(),GroupMemberFilterType:n(".js-resource-groupmemberfiltertype",t).val(),ResourceDataViewId:n(".js-resource-dataview-id",t).val(),ResourceAdditionalPersonIds:e};r=t.find(".js-loading-notification");i.html(" ");r.fadeIn();n.ajax({method:"POST",url:s,data:o}).done(function(t){var h=i.parent(),o,f,s,e;for(i.detach(),i.html(""),o=n(".js-unscheduled-resource-template").find(".js-resource"),f=0;f<t.length;f++)s=t[f],e=o.clone(),u.populateResourceDiv(e,s),i.append(e);h.append(i);setTimeout(function(){r.hide()},0)}).fail(function(t){console.log("fail:"+t.responseText);n(".ajax-error-message").html(t.responseText);n(".ajax-error").show();r.hide()})},populateResourceDiv:function(n,t){var b,k,c,o,l,a,s,v,f,y,e,i,u,p,h,d,r;if(n.attr("data-status",t.ConfirmationStatus),n.attr("data-person-id",t.PersonId),n.attr("data-has-scheduling-conflict",t.HasSchedulingConflict),n.attr("data-matches-preference",t.MatchesPreference),n.attr("data-has-blackout-conflict",t.HasBlackoutConflict),n.attr("data-has-partial-blackout-conflict",t.HasPartialBlackoutConflict),n.data("blackout-dates",t.BlackoutDates),n.attr("data-displayed-time-slot-count",t.DisplayedTimeSlotCount),n.attr("data-has-requirements-conflict",t.HasGroupRequirementsConflict),b=n.find(".js-resource-meta"),t.GroupRole&&(k=n.find(".js-resource-member-role"),k.append(t.GroupRole.Name)),t.GroupMemberId?n.attr("data-groupmember-id",t.GroupMemberId):n.find(".js-update-preference").hide(),t.ResourcePreferenceList&&t.ResourcePreferenceList.length>0)for(c=n.find(".js-resource-preferences"),c.append("<span class='resource-header'>Preference<\/span>"),i=0;i<t.ResourcePreferenceList.length;i++)o=t.ResourcePreferenceList[i],l='<div class="resource-preference"><span class="resource-preference-schedule">'+o.ScheduleName+"<\/span>",o.LocationName&&(l+=' - <span class="resource-preference-location">'+o.LocationName+"<\/span><\/div>"),c.append(l);if(t.ResourceScheduledList&&t.ResourceScheduledList.length>0)for(a=n.find(".js-resource-scheduled"),a.append("<span class='resource-header'>Assignments<\/span>"),i=0;i<t.ResourceScheduledList.length;i++)s=t.ResourceScheduledList[i],v='<div class="resource-scheduled"><span class="resource-scheduled-schedule">'+s.ScheduleName+"<\/span>",s.LocationName&&(v+=' - <span class="resource-scheduled-location">'+s.LocationName+"<\/span><\/div>"),a.append(v);if(t.HasBlackoutConflict)n.attr("title",t.PersonName+" cannot be scheduled due to a blackout."),n.tooltip({html:!0});else if(t.HasGroupRequirementsConflict)n.attr("title",t.PersonName+" does not meet the requirements for this group."),n.tooltip({html:!0});else if(t.HasSchedulingConflict||t.HasPartialBlackoutConflict){if(f=t.PersonName,t.HasSchedulingConflict){for(y=t.SchedulingConflicts,e="",i=0;i<y.length;i++)u=y[i],p="",e+='<div class="resource-scheduled"><span class="resource-scheduled-schedule">'+u.ScheduleName+"<\/span>",u.GroupId&&(e+=' - <span class="resource-scheduled-group">'+u.GroupName+"<\/span>"),u.LocationName&&(e+=' - <span class="resource-scheduled-location">'+u.LocationName+"<\/span>"),p+=e+"<\/div>";f+=' has scheduling conflicts: <br><div class="resource-scheduled small">'+p+"<\/div"}if(t.HasSchedulingConflict&&t.HasPartialBlackoutConflict&&(f+=" and"),t.HasPartialBlackoutConflict){var w=t.BlackoutDates.map(function(n){return new Date(n).toLocaleDateString()}),g=w[0],nt=w[w.length-1];f+=" has a blackout from "+g+" to "+nt}n.attr("title",f+".");n.tooltip({html:!0})}h=n.find(".js-resource-name");h.text(t.PersonName);t.ConfirmationStatus=="declined"&&(d=t.DeclinedReason||"No reason given.",h.attr("data-original-title",d),h.tooltip({html:!0}));t.Note&&(n.addClass("has-note"),b.parent().prepend('<div class="resource-note js-resource-note hide-transit">'+t.Note+"<\/div>"));r=n.find(".js-resource-name-meta");t.ConflictNote&&r.append('<span class="resource-warning hide-transit">'+t.ConflictNote+"<\/span>");t.HasSchedulingConflict&&r.append('<span class="resource-scheduling-conflict hide-transit" title="Scheduling Conflict"><i class="fa fa-user-clock"><\/i><\/span>');t.HasBlackoutConflict&&r.append('<span class="resource-blackout-status hide-transit" title="Blackout"><i class="fa fa-user-times"><\/i><\/span>');t.HasPartialBlackoutConflict&&r.append('<span class="resource-partial-blackout-status hide-transit" title="Partial Blackout"><i class="fa fa-user-clock"><\/i><\/span>');t.HasGroupRequirementsConflict&&r.append('<span class="resource-requirements-conflict hide-transit" title="Group Requirements Not Met"><i class="fa fa-exclamation-triangle"><\/i><\/span>');t.LastAttendanceDateTime&&r.append('<span class="resource-lastattendeddate hide-transit" title="Last Attended" data-datetime="'+t.LastAttendanceDateTime+'">'+t.LastAttendanceDateTimeFormatted+"<\/span>");t.IsAlreadyScheduledForGroup!=null&&n.attr("data-is-scheduled",t.IsAlreadyScheduledForGroup);t.AttendanceId&&n.attr("data-attendance-id",t.AttendanceId)},initializeEventHandlers:function(){var t=this;n(".js-hide-alert",t.$groupScheduler).click(function(){n(this).closest(".js-alert").hide()});t.$groupScheduler.on("click",".js-markconfirmed, .js-markdeclined, .js-markpending, .js-resendconfirmation, .js-remove",function(){var i=n(this).closest(".js-resource"),o=i.attr("data-attendance-id"),r,e;if(n(this).hasClass("js-markconfirmed"))r=Rock.settings.get("baseUrl")+"api/Attendances/ScheduledPersonConfirm";else if(n(this).hasClass("js-markdeclined"))r=Rock.settings.get("baseUrl")+"api/Attendances/ScheduledPersonDecline";else if(n(this).hasClass("js-markpending"))r=Rock.settings.get("baseUrl")+"api/Attendances/ScheduledPersonPending";else if(n(this).hasClass("js-resendconfirmation"))r=Rock.settings.get("baseUrl")+"api/Attendances/ScheduledPersonSendConfirmationEmail";else{if(n(this).hasClass("js-remove")){var s=i.closest(".js-scheduled-occurrence"),u=i.attr("data-person-id"),f=!0;u&&(e="[data-person-id="+u+"]",f=n(e,t.$resourceList).length==0);t.removeResource(i,s,f);return}return}n.ajax({method:"PUT",url:r+"?attendanceId="+o}).done(function(){var n=i.closest(".js-scheduled-occurrence");t.populateScheduledOccurrence(n)}).fail(function(t){console.log("fail:"+t.responseText);n(".ajax-error-message").html(t.responseText);n(".ajax-error").show()})});n(window).on("mousemove",function(i){if(t.resourceListDrake.dragging){var u=n(window),e=window.innerHeight,r=u.scrollTop(),o=i.clientY,f=o/e;f>.9?(r+=20,u.scrollTop(r)):f<.1&&r!=0&&(r-=20,u.scrollTop(r))}})}}}()}(jQuery),function(n){"use strict";n.Application.add_load(function(){$("a.help").on("click",function(n){n.preventDefault();$(this).siblings("div.alert-info").slideToggle(function(){Rock.controls.modal.updateSize(this)});$(this).siblings("a.warning").insertAfter($(this));$(this).siblings("div.alert-warning").slideUp()})})}(Sys),function(){"use strict";window.Rock=window.Rock||{};Rock.htmlEditor=function(){return{toolbar_RockCustomConfigLight:[["source_group",["rockcodeeditor"]],["style_group1",["bold","italic","strikethrough","link","color","style","ol","ul"]],["style_group3",["clear"]],["para",["paragraph"]],["plugins1",["rockmergefield"]],["plugins2",["rockimagebrowser","rockfilebrowser","rockassetmanager"]],["plugins3",["rockpastetext","rockpastefromword"]],["style_group2",["undo","redo"]]],toolbar_RockCustomConfigFull:[["source_group",["rockcodeeditor"]],["style_group1",["bold","italic","underline","strikethrough","ol","ul","link"]],["style_group2",["undo","redo"]],["style_group3",["clear"]],["style_group4",["style","color"]],["full_toolbar_only",["fontname","fontsize","superscript","subscript","table","hr"]],["para",["paragraph"]],["plugins1",["rockmergefield"]],["plugins2",["rockimagebrowser","rockfilebrowser","rockassetmanager"]],["plugins3",["rockpastetext","rockpastefromword"]],["help_group1",["help"]]]}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.imageUploader=function(){var t=function(t){var r,u,i;t.isBinaryFile=t.isBinaryFile||"T";r=n("#"+t.hfContentFileSource);u=n("#"+t.hfFileId);t.setImageUrlOnUpload==null&&(t.setImageUrlOnUpload=!0);i=Rock.settings.get("baseUrl")+"ImageUploader.ashx?isBinaryFile="+t.isBinaryFile;i+=t.isBinaryFile=="T"?"&fileId="+t.fileId+"&fileTypeGuid="+t.fileTypeGuid:"&rootFolder="+(encodeURIComponent(t.rootFolder)||"");t.isTemporary=="F"&&(i+="&IsTemporary=False");n("#"+t.controlId).fileupload({url:i,dataType:"json",dropZone:n("#"+t.controlId).closest(".imageupload-dropzone"),autoUpload:!0,submit:t.submitFunction,start:function(){var i=n("#"+t.controlId).closest(".imageupload-group");i.find(".js-upload-progress").rockFadeIn()},progressall:function(){},stop:function(){var i=n("#"+t.controlId).closest(".imageupload-group");i.find(".js-upload-progress").hide();i.find(".imageupload-dropzone").rockFadeIn()},done:function(i,f){var o=n("#"+t.imgThumbnail),e;(t.isBinaryFile||"T")=="F"?r.val(f.response().result.FileName):u.val(f.response().result.Id);e=Rock.settings.get("baseUrl")+"GetImage.ashx?isBinaryFile="+(t.isBinaryFile||"T")+"&id="+f.response().result.Id+"&fileName="+f.response().result.FileName+"&width=500";t.rootFolder&&(e+="&rootFolder="+encodeURIComponent(t.rootFolder));t.setImageUrlOnUpload&&(o.is("img")?o.attr("src",e):o.attr("style",'background-image:url("'+e+'");background-size:cover;background-position:50%'));n("#"+t.aRemove).show();t.postbackScript&&(window.location="javascript:"+t.postbackScript);t.doneFunction&&t.doneFunction(i,f)},fail:function(i,r){var e=n("#"+t.controlId).closest(".imageupload-group"),f,u;e.siblings(".js-rockupload-alert").remove();f=n('<div class="alert alert-warning alert-dismissable js-rockupload-alert"/>');u="unable to upload";r.response().jqXHR&&r.response().jqXHR.status==406?u="file type not allowed":r.response().jqXHR&&r.response().jqXHR.responseText&&(u=r.response().jqXHR.responseText);t.maxUploadBytes&&r.total&&r.total>=t.maxUploadBytes&&(u="file size is limited to "+t.maxUploadBytes/1048576+"MB");f.append('<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;<\/button>').append('<strong><i class="fa fa-exclamation-triangle"><\/i> Warning <\/strong>').append(u);f.insertBefore(e)}});n("#"+t.aRemove).on("click",function(){n(this).hide();var i=n("#"+t.imgThumbnail),f=t.noPictureUrl||Rock.settings.get("baseUrl")+"Assets/Images/no-picture.svg";return i.is("img")?i.attr("src",f):i.attr("style","background-image:url("+f+");background-size:cover;background-position:50%"),t.deleteFunction&&t.deleteFunction(),t.postbackRemovedScript?window.location="javascript:"+t.postbackRemovedScript:(u.val("0"),r.val("")),!1})};return{initialize:function(n){if(!n.controlId)throw"Control ID must be set.";t(n)}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.itemPicker=function(){var i=function(n){this.options=n;this.alreadyScrolledToSelected=!1;this.iScroll=null},t;return i.prototype={constructor:i,initialize:function(){var t=n("#"+this.options.controlId),r=t.find(".treeview"),i={multiselect:this.options.allowMultiSelect,categorySelection:this.options.allowCategorySelection,categoryPrefix:this.options.categoryPrefix,restUrl:this.options.restUrl,restParams:this.options.restParams,expandedIds:this.options.expandedIds,showSelectChildren:this.options.showSelectChildren,id:this.options.startingId},u=t.find(".js-item-id-value"),e=t.find(".js-initial-item-parent-ids-value"),f,o,s;typeof this.options.mapItems=="function"&&(i.mapping={mapData:this.options.mapItems});f=r.data("rockTree");f&&(f.nodes=[]);r.empty();o=t.find(".scroll-container .viewport");s=t.find(".track");this.iScroll=new IScroll(o[0],{mouseWheel:!0,indicators:{el:s[0],interactive:!0,resize:!1,listenY:!0,listenX:!1},click:!1,preventDefaultException:{tagName:/.*/}});this.initializeEventHandlers();u.val()&&u!=="0"&&(i.selectedIds=u.val().split(","));e.val()&&(i.expandedIds=e.val().split(","));r.rockTree(i);this.updateScrollbar()},initializeEventHandlers:function(){var i=this,t=n("#"+this.options.controlId),r=t.find(".selected-names"),u=t.find(".js-item-id-value"),f=t.find(".js-item-name-value");t.find(".treeview").on("rockTree:selected",function(){}).on("rockTree:itemClicked",function(){i.alreadyScrolledToSelected=!0;i.options.allowMultiSelect||t.find(".picker-btn").trigger("click")}).on("rockTree:expand rockTree:collapse rockTree:dataBound",function(){i.updateScrollbar()}).on("rockTree:rendered",function(){i.scrollToSelectedItem()});t.find("a.picker-label").on("click",function(r){r.preventDefault();n(this).toggleClass("active");t.find(".picker-menu").first().toggle(0,function(){i.scrollToSelectedItem()})});t.find(".picker-cancel").on("click",function(){n(this).toggleClass("active");n(this).closest(".picker-menu").toggle(0,function(){i.updateScrollbar()});n(this).closest("a.picker-label").toggleClass("active")});u.val()&&u.val()!=="0"&&(t.find(".picker-select-none").addClass("rollover-item"),t.find(".picker-select-none").show());t.find(".picker-btn").on("click",function(e){var c=t.find(".treeview").data("rockTree"),l=c.selectedNodes,o=[],s=[],h;n.each(l,function(t,i){var r=n("<textarea/>").html(i.name).text();s.push(r);o.includes(i.id)||o.push(i.id)});u.val(o.join(",")).trigger("change");f.val(s.join(","));t.find(".picker-select-none").addClass("rollover-item");t.find(".picker-select-none").show();r.text(s.join(", "));r.attr("title",r.text());n(this).closest("a.picker-label").toggleClass("active");n(this).closest(".picker-menu").toggle(0,function(){i.updateScrollbar()});e&&e.originalEvent&&e.originalEvent.srcElement==this||(h=n(this).attr("href"),h&&(window.location=h))});t.find(".picker-select-none").on("click",function(n){n.stopImmediatePropagation();var e=t.find(".treeview").data("rockTree");e.clear();u.val("0").trigger("change");f.val("");t.find(".picker-select-none").removeClass("rollover-item");t.find(".picker-select-none").hide();t.siblings(".js-hide-on-select-none").hide();r.text(i.options.defaultText);r.attr("title",r.text())});t.on("click",".js-select-all",function(i){var f=t.find(".treeview").data("rockTree"),r,u;i.preventDefault();i.stopPropagation();r=f.$el.find(".rocktree-name");u=!0;r.each(function(){n(this).hasClass("selected")||(u=!1)});u?(f.setSelected([]),r.removeClass("selected")):(r.removeClass("selected"),r.trigger("click"))})},updateScrollbar:function(t){var i=this,r=n("#"+this.options.controlId).find(".scroll-container");r.is(":visible")&&(t||(t="relative"),i.iScroll&&i.iScroll.refresh());Rock.dialogs.updateModalScrollBar(this.options.controlId)},scrollToSelectedItem:function(){var t=n("#"+this.options.controlId).find(".picker-menu").find(".selected").first();t.length&&!this.alreadyScrolledToSelected?(this.updateScrollbar(),this.iScroll.scrollToElement(".selected","0s"),this.alreadyScrolledToSelected=!0):this.updateScrollbar()}},t={defaults:{id:0,controlId:null,restUrl:null,restParams:null,allowCategorySelection:!1,categoryPrefix:"",allowMultiSelect:!1,defaultText:"",selectedIds:null,expandedIds:null,showSelectChildren:!1},controls:{},initialize:function(r){var u,f;if(!r.controlId)throw"controlId must be set";if(!r.restUrl)throw"restUrl must be set";u=n.extend({},t.defaults,r);u.defaultText||(u.defaultText=t.defaults.defaultText);f=new i(u);t.controls[u.controlId]=f;f.initialize()}}}()}(jQuery),function(){function n(n){var i=n.closest("span.key-value-list"),t="";i.children("span.key-value-rows:first").children("div.controls-row").each(function(){t!==""&&(t+="|");var n=$(this).children(".key-value-key").first().val(),i=$(this).children(".key-value-value").first().val();["^","|",","].forEach(function(t){var r=new RegExp("\\"+t,"g");n.indexOf(t)>-1&&(n=n.replace(r,encodeURIComponent(t)));i.indexOf(t)>-1&&(i=i.replace(r,encodeURIComponent(t)))});t+=n+"^"+i});i.children("input").first().val(t)}Sys.Application.add_load(function(){$("a.key-value-add").on("click",function(t){t.preventDefault();var i=$(this).closest(".key-value-list");i.find(".key-value-rows").append(i.find(".js-value-html").val());n($(this));Rock.controls.modal.updateSize($(this))});$(document).on("click","a.key-value-remove",function(t){t.preventDefault();var i=$(this).closest("span.key-value-rows");$(this).closest("div.controls-row").remove();n(i);Rock.controls.modal.updateSize($(this))});$(document).on("change",".js-key-value-input",function(){n($(this))})})}(),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.listItems=function(){return{initialize:function(t){function i(i){var r=i.closest("span.list-items"),u=[];r.children("span.list-items-rows").first().children("div.controls-row").each(function(){u.push({Key:n(this).children(".input-group").find(".js-list-items-input").first().data("id"),Value:n(this).children(".input-group").find(".js-list-items-input").first().val()})});r.children("input").first().val(JSON.stringify(u));t.valueChangedScript&&(window.location="javascript:"+t.valueChangedScript)}if(!t.id)throw"id is required";var r=function(t,i){return i.children().each(function(){n(this).width(n(this).width())}),i};n("a.list-items-add").on("click",function(t){t.preventDefault();var r=n(this).closest(".list-items");r.find(".list-items-rows").append(r.find(".js-list-items-html").val());i(n(this));Rock.controls.modal.updateSize(n(this))});Sys.Application.add_load(function(){n(document).on("click","a.list-items-remove",function(t){t.preventDefault();var r=n(this).closest("span.list-items-rows");n(this).closest("div.controls-row").remove();i(r);Rock.controls.modal.updateSize(n(this))});n(document).on("focusout",".js-list-items-input",function(){i(n(this))})});n(".list-items .list-items-rows").sortable({helper:r,handle:".fa-bars",start:function(n,t){var i=t.item.index();t.item.data("start_pos",i)},update:function(){i(n(this))}}).disableSelection()}}}()}(jQuery),function(n){window.Rock=window.Rock||{};window.Rock.controls=window.Rock.controls||{};window.Rock.controls.mediaElementPicker=function(){return{initialize:function(t){var i=n("#"+t.controlId);i.data("required",t.required===!0);i.find(".js-media-element-picker-refresh").on("click",function(){return n(this).hasClass("disabled")?!1:(i.find(".js-media-element-picker-refresh").addClass("disabled"),n(this).find("i.fa").addClass("fa-spin"),window.location="javascript:"+t.refreshScript,!1)});i.find(".js-media-element-value select").on("change",function(){ValidatorValidate(window[i.find(".js-media-element-validator").prop("id")])})},clientValidate:function(t,i){var f=n(t).closest(".js-media-element-picker").attr("id"),r=n("#"+f),e=r.data("required")===!0,u=r.find(".js-media-element-value select").val()||"",o=!e||u!==""&&u!=="0";o?(r.closest(".form-group").removeClass("has-error"),i.IsValid=!0):(r.closest(".form-group").addClass("has-error"),i.IsValid=!1)}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.mediaPlayer=function(){return{initialize:function(){Sys.Application.add_load(function(){var t=Rock.settings.get("baseUrl")+"Scripts/mediaelementjs/mediaelementplayer.min.css",i=Rock.settings.get("baseUrl")+"Scripts/mediaelementjs/mediaelement-and-player.js";n("#mediaElementCss").length||n("head").append("<link id='mediaElementCss' href='"+t+"' type='text/css' rel='stylesheet' />");n("#mediaElementJs").length||(n.ajaxSetup({cache:!0}),n("head").prepend("<script id='mediaElementJs' src='"+i+"' />"));n("audio.js-media-audio,video.js-media-video").mediaelementplayer({enableAutosize:!0})})}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.modal=function(){var i=function(t,i){var f=n("#modal-popup"),r=f.find("iframe"),u;t.attr("title")!=undefined&&n("#modal-popup_panel h3").html(t.attr("title")+" <small><\/small>");r.height("auto");r.one("load",function(){n("#modal-popup").fadeTo(0,1);var t=n(this.contentWindow.document).height();n(this).height()!=t&&n(this).height(t);n("body").addClass("modal-open");document.body.clientHeight>window.innerHeight&&n("body").css("padding-right",Rock.controls.util.getScrollbarWidth());n("#modal-popup").modal("layout")});n("#modal-popup").fadeTo(0,0);u=i.indexOf("?")===-1?"?":"&";i=i+u+"IsIFrameModal=true";r.attr("src",i);n("#modal-popup").modal({show:!0,backdrop:"static",keyboard:!1,attentionAnimation:"",modalOverflow:!0})},t=function(t,i){t&&t.length&&t.modal&&t.modal("hide");i&&i.length&&i.each(function(){n(this).removeClass("modal-open")});n(".modal:visible").length===0&&n("body").removeClass("modal-open").css("padding-right","");n(".modal-backdrop").each(function(){var t=n(this),i=t.data("modalId"),r=n("#"+i),u=r.length>0;!i||u&&r.is(":visible")||t.remove()})},r=function(i,r,u,f){n("body").addClass("modal-open");document.body.clientHeight>window.innerHeight&&n("body").css("padding-right",Rock.controls.util.getScrollbarWidth());i.modal({show:!0,manager:r,backdrop:"static",keyboard:!1,attentionAnimation:"",modalOverflow:!0,replace:!0});n(".modal-backdrop").filter(":visible").length===0&&n('<div class="modal-backdrop" data-modal-id="'+i.prop("id")+'" />').appendTo("body");u&&n(".modal-scrollable").click(function(u){u.target===u.currentTarget&&(n(".modal-scrollable").off("click"),t(i,n(r)),f&&f.length&&f.val(0))})};return{updateSize:function(t){var r=typeof t=="string"?n("#"+t):n(t),i,u;r&&r.length&&(i=r.closest(".modal-body"),i.is(":visible")&&(i[0].style.minHeight="0",u=i.prop("scrollHeight"),i.outerHeight()!=u&&(i[0].style.minHeight=u+"px",n("#dialog").length&&n("#dialog")[0].resizedAttached&&n("#dialog")[0].resizedAttached.call())))},close:function(t){n("#modal-popup").hide();setTimeout(function(){n("#modal-popup iframe").attr("src","");n("#modal-popup").modal("hide")},0);n("body").removeClass("modal-open").css("padding-right","");t&&t!=""&&(t=="PAGE_UPDATED"?location.reload(!0):(n("#rock-config-trigger-data").val(t),n("#rock-config-trigger").trigger("click")))},closeModalDialog:function(n,i){t(n,i)},show:function(n,t){i(n,t)},showModalDialog:function(n,t,i,u){r(n,t,i,u)},getModalPopupIFrame:function(){var t=n("#modal-popup");return t.find("iframe")}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.noteEditor=function(){return{initialize:function(t){var i,r,u,f,e;if(!t.id)throw"id is required";(i=this,r=n("#"+t.id),r.length!=0)&&(i.$noteEditor=r,this.initializeEventHandlers(),t.isEditing&&(u=i.$noteEditor.closest(".js-notecontainer"),t.currentNoteId?(f=u.find("[data-note-id='"+t.currentNoteId+"']"),i.$noteEditor.detach(),f.parent(".js-note").prepend(i.$noteEditor),i.$noteEditor.fadeIn(),f.hide()):t.parentNoteId?(e=u.find("[data-note-id='"+t.parentNoteId+"']"),i.$noteEditor.detach(),e.append(i.$noteEditor),i.$noteEditor.slideDown().find("textarea").trigger("focus")):i.$noteEditor.fadeIn()))},initializeEventHandlers:function(){n(".js-notecontainer .js-addnote,.js-editnote,.js-replynote").on("click",function(){var s=n(this).hasClass("js-addnote"),h=n(this).hasClass("js-editnote"),c=n(this).hasClass("js-replynote"),l=n(this).hasClass("js-editnote-cancel"),a=n(this).hasClass("js-removenote"),f=n(this).closest(".js-notecontainer"),v=f.data("sortdirection"),i=f.find(".js-note-editor"),e=n(!1),o,u,t,r;if(i.detach(),i.find(".js-parentnoteid").val(""),i.find("textarea").val(""),i.find("input:checkbox").prop("checked",!1),i.find(".js-notesecurity").hide(),o=i.find(".js-noteprivate"),o.parent().show(),s){if(t=i.find(".js-postback-control-id").val(),t){r="javascript:__doPostBack('"+t+"','AddNote^"+u+"');";window.location=r;return}}else if(e=n(this).closest(".js-noteviewitem"),u=e.data("note-id"),c){if(i.find(".js-parentnoteid").val(u),t=i.find(".js-postback-control-id").val(),t){r="javascript:__doPostBack('"+t+"','ReplyToNote^"+u+"');";window.location=r;return}}else if(h&&(t=i.find(".js-postback-control-id").val(),t)){r="javascript:__doPostBack('"+t+"','EditNote^"+u+"');";window.location=r;return}});n(".js-notecontainer .js-notesecurity").on("click",function(){var t=n(this),i=t.data("entitytype-id"),r=t.data("title"),u=t.data("entity-id"),f=Rock.settings.get("baseUrl")+"Secure/"+i+"/"+u+"?t="+r+"&pb=&sb=Done";Rock.controls.modal.show(t,f)});n(".js-notecontainer .js-editnote-cancel").on("click",function(){var i=n(this).closest(".js-notecontainer"),t=i.find(".js-note-editor");t.slideUp();t.parent().find(".js-noteviewitem").slideDown()});n(".js-notecontainer .js-removenote").on("click",function(t){var u=n(this).closest(".js-noteviewitem"),f=u.attr("data-note-id"),i=n(this).closest(".js-notecontainer"),r;return i.find(".js-currentnoteid").val(f),t.preventDefault(),t.stopImmediatePropagation(),r=i.find(".js-delete-postback").attr("href"),Rock.dialogs.confirm("Are you sure you want to delete this note?",function(n){n&&(window.location=r)})});n(".js-expandreply").on("click",function(){var t=n(this).closest(".js-notecontainer"),i=n(this).closest(".js-note"),r=i.find(".js-childnotes").first();r.slideToggle(function(){var i=n(this).closest(".js-notecontainer").find(".js-noteviewitem:visible").map(function(){var t=n(this).closest(".js-note"),i=t.find(".js-childnotes:first").is(":visible");return i?n(this).attr("data-note-id"):null}).get().join(),r=t.find(".js-expandednoteids");r.val(i)})})}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.numberBox=function(){return{clientValidate:function(t,i){var r=n(t),u=parseFloat(r.attr("max")),f=parseFloat(r.attr("min")),o=u||u==0,s=f||f==0,e=parseFloat(i.Value);i.IsValid=(e||e==0)&&(!o||i.Value<=u)&&(!s||i.Value>=f);i.isValid||setTimeout(function(){n("#"+r[0].id).text(r.attr("errormessage"))},50)}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.numberRangeEditor=function(){return{clientValidate:function(t,i){var r=n(t).closest(".js-numberrangeeditor"),o=r.find("input.js-number-range-lower ").val(),s=r.find("input.js-number-range-upper").val(),h=r.attr("data-required")=="true",c=r.attr("data-itemlabel"),u=!0;h&&o.length===0&&s.length===0&&(u=!1,t.errormessage=c+" is required");var f=r,l="label[for='"+r.prop("id")+"']",e=n(l);u?(f.removeClass("has-error"),e.parent().removeClass("has-error")):(f.addClass("has-error"),e.parent().addClass("has-error"));i.IsValid=u}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.numberUpDown=function(){return{adjust:function(t,i,r){var u=n(t).closest("div.numberincrement"),l=u.find(".js-number-up-down-min").first(),a=u.find(".js-number-up-down-max").first(),e=u.find(".js-number-up-down-value").first(),v=u.find(".js-number-up-down-lbl").first(),o=u.find(".js-number-up").first(),s=u.find(".js-number-down").first(),h=parseInt(l.val(),10),c=parseInt(a.val(),10),f=parseInt(e.val(),10)+i;f>=h&&f<=c&&(e.val(f),v.html(f));f>=c?o.addClass("disabled"):o.removeClass("disabled");f<=h?s.addClass("disabled"):s.removeClass("disabled");r&&r!=""&&(window.location="javascript:"+r)}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.numberUpDownGroup=function(){return{clientValidate:function(t,i){var u=n(t).closest(".js-number-up-down-group"),r=!0,f;u.hasClass("required")===!0&&(r=!1,u.find(".js-number-up-down-lbl").each(function(){parseInt(this.innerText,10)>0&&(r=!0)}));r===!1&&(t.errormessage=u.find("label").text()+" is required");f=u;r?f.removeClass("has-error"):f.addClass("has-error");i.IsValid=r}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.pbx=function(){return{originate:function(t,i,r){var u=Rock.settings.get("baseUrl")+"api/Pbx/Originate?sourcePersonGuid="+t+"&destinationPhone="+i+"&callerId="+r;console.log("From Rock.controls.originateCall: "+u);n.get(u,function(n){n.Success||Rock.dialogs.alert("An error occurred while attempting to place call.  "+n.Message)})}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.personPicker=function(){var i=function(t){this.controlId=t.controlId;this.restUrl=t.restUrl;this.restDetailUrl=t.restDetailUrl;this.defaultText=t.defaultText||"";this.iScroll=null;this.$pickerControl=n("#"+this.controlId);this.$pickerScrollContainer=this.$pickerControl.find(".js-personpicker-scroll-container")},t;return i.prototype.initializeEventHandlers=function(){var r=this.controlId,ut=this.restUrl,ft=this.restDetailUrl||Rock.settings.get("baseUrl")+"api/People/GetSearchDetails",et=this.defaultText,i=this.$pickerControl,ot=i.find(".js-personpicker-search-field input"),o=i.find(".js-personpicker-search-name input"),s=i.find(".js-personpicker-search-address input"),h=i.find(".js-personpicker-search-phone input"),c=i.find(".js-personpicker-search-email input"),f=i.find(".js-personpicker-searchresults"),st=i.find(".js-personpicker-toggle"),l=i.find(".js-personpicker-menu"),a=i.find(".js-personpicker-select"),v=i.find(".js-picker-select-none"),y=i.find(".js-person-id"),g=i.find(".js-person-name"),ht=i.find(".js-personpicker-cancel"),nt=i.find(".js-toggle-additional-search-fields"),tt=i.find(".js-personpicker-additional-search-fields"),p=i.find(".js-expand-search-fields"),ct=i.find(".js-include-businesses").val()=="1"?"true":"false",lt=i.find(".js-include-deceased").val()=="1"?"true":"false",w="true",u=null,it=null,rt=ot.autocomplete({source:function(i,e){var l={name:o.val(),address:s.val(),phone:h.val(),email:c.val()},a,v;if(l.name.length<3&&l.address.length<3&&l.phone.length<3&&l.email.length<3){console.log("min length 3");return}u&&u.state()==="pending"&&u.abort();a=[];l.name&&a.push("name="+encodeURIComponent(l.name));l.address&&s.is(":visible")&&a.push("address="+encodeURIComponent(l.address));l.phone&&h.is(":visible")&&a.push("phone="+encodeURIComponent(l.phone));l.email&&c.is(":visible")&&a.push("email="+encodeURIComponent(l.email));v="?"+a.join("&");u=n.ajax({url:ut+v+"&includeDetails="+w+"&includeBusinesses="+ct+"&includeDeceased="+lt,timeout:2e4,dataType:"json"});n(".js-searching-notification").length==0&&f.prepend('<i class="fa fa-refresh fa-spin margin-l-md js-searching-notification" style="display: none; opacity: .4;"><\/i>');n(".js-searching-notification").delay(1500).fadeIn(800);u.done(function(i){f.html("");e(n.map(i,function(n){return n}));t.personPickers[r].updateScrollbar()});u.fail(function(t,i,r){console.log(i+" ["+r+"]: "+t.responseText);var u=t.status;u==401&&f.html("<li class='text-danger'>Sorry, you're not authorized to search.<\/li>");n(".js-searching-notification").remove()})},minLength:0,html:!0,appendTo:f,pickerControlId:r,messages:{noResults:function(){},results:function(){}}}),at=function(t,i){var u,r;if(this.options.html){u="";!i.IsActive&&i.RecordStatus&&(u=" <small>("+i.RecordStatus+")<\/small>");i.IsDeceased&&(u=' <small class="text-danger">(Deceased)<\/small>');r="";(i.FormattedAge||i.SpouseNickName)&&(r=" <small class='rollover-item text-muted'>",i.FormattedAge&&(r+="Age: "+i.FormattedAge),i.SpouseNickName&&(i.FormattedAge&&(r+="; "),r+="Spouse: "+i.SpouseNickName),r+="<\/small>");var o=n("<div/>").attr("class","radio"),s=n("<label/>").html('<span class="label-text">'+i.Name+u+r+'<\/span><i class="fa fa-refresh fa-spin margin-l-md loading-notification" style="display: none; opacity: .4;"><\/i>').prependTo(o),c=n('<input type="radio" name="person-id" />').attr("id",i.Id).attr("value",i.Id).prependTo(s),e=n("<li/>").addClass("picker-select-item js-picker-select-item").attr("data-person-id",i.Id).attr("data-person-name",i.Name).html(o),h=n(this.options.appendTo),f=n("<div/>").addClass("picker-select-item-details js-picker-select-item-details clearfix");return i.SearchDetailsHtml?f.attr("data-has-details",!0).html(i.SearchDetailsHtml):f.attr("data-has-details",!1),w==="false"&&f.hide(),f.appendTo(e),i.IsActive||e.addClass("is-inactive"),h.append(e)}return n("<li><\/li>").data("item.autocomplete",i).append(n("<a><\/a>").text(i.label)).appendTo(t)},b,e,k,d;n.each(rt,function(t){var i=n(rt[t]).data("ui-autocomplete");i._renderItem=at});st.on("click",function(i){i.preventDefault();n(this).toggleClass("active");l.toggle(0,function(){t.personPickers[r].updateScrollbar();o.trigger("focus")})});i.on("click",".js-picker-select-item",function(u){var l,h,c;if(u.type!="click"||n(u.target).is(":input")!=!1){u.stopPropagation();var f=n(this).closest(".js-picker-select-item"),o=f.find(".js-picker-select-item-details"),s=f.attr("data-person-id");o.is(":visible")&&s==it&&u.type=="click"&&(l=f.attr("data-person-name"),e(s,l),h=a.prop("href"),h&&(window.location=h));w==="false"&&n(".js-picker-select-item-details",i).filter(":visible").each(function(){var i=n(this),u=i.closest(".js-picker-select-item").attr("data-person-id");u!=s&&(i.slideUp(),t.personPickers[r].updateScrollbar())});it=s;o.attr("data-has-details")=="false"?(c=f.find(".loading-notification"),c.fadeIn(800),n.get(ft+"?Id="+s,function(n){o.attr("data-has-details",!0);o.stop().hide().html(n);b(o);c.stop().fadeOut(200)})):b(f.find(".picker-select-item-details:hidden"))}});b=function(n){n.length&&n.slideDown(function(){t.personPickers[r].updateScrollbar()})};i.on("mouseenter",function(){(y.val()||"0")!=="0"&&v.stop().show()}).on("mouseleave",function(){v.fadeOut(500)});ht.on("click",function(){k();l.slideUp(function(){t.personPickers[r].updateScrollbar()})});v.on("click",function(){var n=et;y.val("0");g.val(n)});e=function(n,t){var r=i.find(".js-personpicker-selectedperson-label");y.val(n);g.val(t);r.val(n);r.text(t);l.slideUp()};k=function(){o.val("");s.val("");h.val("");c.val("")};a.on("click",function(){var n=i.find("input:checked"),t=n.val(),r=n.closest(".js-picker-select-item").attr("data-person-name");e(t,r);k()});d=function(){var n=p.val();n==1?tt.slideDown():tt.slideUp();nt.toggleClass("active",n==1)};d();nt.on("click",function(){var n=p.val();n=n==1?0:1;p.val(n);d()});n(".js-select-self",i).on("click",function(){var r=n(".js-self-person-id",i).val(),u=n(".js-self-person-name",i).val(),t;e(r,u);t=a.prop("href");t&&(window.location=t)})},i.prototype.updateScrollbar=function(){var n=this;n.$pickerScrollContainer.is(":visible")&&n.iScroll&&n.iScroll.refresh();Rock.dialogs.updateModalScrollBar(this.controlId)},i.prototype.initialize=function(){this.iScroll=new IScroll(n(".viewport",this.$pickerControl)[0],{mouseWheel:!0,indicators:{el:n(".track",this.$pickerScrollContainer)[0],interactive:!0,resize:!1,listenY:!0,listenX:!1},click:!1,preventDefaultException:{tagName:/.*/}});this.initializeEventHandlers()},t={personPickers:{},findControl:function(n){return t.personPickers[n]},initialize:function(n){if(!n.controlId)throw"`controlId` is required.";if(!n.restUrl)throw"`restUrl` is required.";var r=new i(n);t.personPickers[n.controlId]=r;r.initialize()}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.priorityNav=function(){const u=500,f=9,t={PRIORITY:"priority",HIDE:"sr-only",RESIZING:"resizing"},i={NAV_ELEMENTS:"li:not('.overflow-nav')",FIRST_ELEMENT:"li:first",PRIORITY_ELEMENT:".priority"},r="More",e="Menu";var o=function(n){return'<li class="overflow-nav dropdown"><a href="#" class="dropdown-toggle nav-link overflow-nav-link" data-toggle="dropdown" role="button" aria-haspopup="true">'+n+'<\/a><ul class="overflow-nav-list dropdown-menu dropdown-menu-right"><\/ul><\/li>'};return{initialize:function(t){let r=n(".nav-tabs");t&&t.id?r=n("#"+t.id):t="";this._element=r;this._config=t;this._$menu=n(r).is("ul")?n(r):n(r).find("ul").first();this._initMenu();this._$allNavElements=this._$menu.find(i.NAV_ELEMENTS);this._bindUIActions();this._setupMenu()},_initMenu:function(){let n=this._config.MenuLabel;typeof n=="undefined"&&(n=r);this._$menu.append(o(n))},_setupMenu:function(){const f=this._$allNavElements,o=this._$menu.find(i.FIRST_ELEMENT).position();let u=n(),s=!0;if(this._$allNavElements.each(function(t){const i=n(this),r=i.position();r.top!==o.top&&(u=u.add(i),s&&(u=u.add(f.eq(t-1)),s=!1))}),u.length){const i=u.clone();if(u.addClass(t.HIDE),u.find("a").attr("tabindex",-1),this._$menu.find(".overflow-nav-list").append(i),this._$menu.find(".overflow-nav").removeClass("hidden"),this._$menu.find(".overflow-nav").position().top!==o.top){const i=n(this._element).find("."+t.HIDE).first().prev(),r=i.clone();i.addClass(t.HIDE);i.find("a").attr("tabindex",-1);this._$menu.find(".overflow-nav-list").prepend(r)}f.length==u.length?(this._$menu.find(".overflow-nav-link").text(e),this._$menu.find(".overflow-nav-list").removeClass("dropdown-menu-right")):(this._$menu.find(".overflow-nav-link").text(r),this._$menu.find(".overflow-nav-list").addClass("dropdown-menu-right"))}this._$menu.find(".overflow-nav").attr("aria-hidden",!0)},_tearDown:function(){this._$menu.find(".overflow-nav-list").empty();this._$menu.find(".overflow-nav").addClass("hidden");this._$allNavElements.removeClass(t.HIDE);this._$allNavElements.find("a").attr("tabindex",0)},_bindUIActions:function(){n(window).on("resize",function(){this._$menu.addClass(t.RESIZING);setTimeout(function(){this._tearDown();this._setupMenu();this._$menu.removeClass(t.RESIZING)},u)});this._$menu.find(".overflow-nav .dropdown-toggle").on("keyup",function(t){t.which===f&&n(t.target).dropdown("toggle")})}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.rangeSlider=function(){return{initialize:function(t){if(!t.controlId)throw"controlId is required";Sys.Application.add_load(function(){var t=Rock.settings.get("baseUrl")+"Scripts/ion.rangeSlider/css/ion.rangeSlider.Rock.css";n("#rangeSliderCss").length||n("head").append("<link id='rangeSliderCss' href='"+t+"' type='text/css' rel='stylesheet' />")});n("#"+t.controlId).ionRangeSlider({type:t.type||"single",min:t.min||0,max:t.max||100,step:t.step||1,from:t.from||null,to:t.to||null,disable:t.disable||!1})}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.rockCheckBoxList=function(){return{clientValidate:function(t,i){for(var u=n(t).closest(".js-rockcheckboxlist"),e=u.find("input"),f=!1,r=0;r<e.length;r++)if(e[r].checked){f=!0;break}f?u.removeClass("has-error"):u.addClass("has-error");i.IsValid=f}}}()}(jQuery),function(n){"use strict";n.Application.add_load(function(){var n=$(".chosen-select"),t;if(n.length){document.activeElement&&!document.activeElement.nodeType&&$("body").trigger("focus");n.chosen({width:"100%",allow_single_deselect:!0,placeholder_text_multiple:" ",placeholder_text_single:" "});n.on("chosen:showing_dropdown chosen:hiding_dropdown",function(){Rock.dialogs.updateModalScrollBar(this)});if(t=n.filter(".chosen-select-absolute"),t.length){t.on("chosen:showing_dropdown",function(){$(this).next(".chosen-container").find(".chosen-drop").css("position","relative")});t.on("chosen:hiding_dropdown",function(){$(this).next(".chosen-container").find(".chosen-drop").css("position","absolute")})}}})}(Sys),function(n,t){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.scheduleBuilder=function(){var i,r=function(n){this.id=n.id};return r.prototype.initializeEventHandlers=function(){var i=this.id,t=n("#"+i).closest(".rock-modal");t.find(".schedule-type").off("click").on("click",function(){var i=n("input[class=schedule-type]:checked").data("schedule-type");i==="schedule-onetime"?t.find(".js-schedule-recurrence-panel").slideUp():t.find(".js-schedule-recurrence-panel").slideDown()});t.find(".recurrence-pattern-radio").off("click").on("click",function(){var i="."+n("input[class=recurrence-pattern-radio]:checked").data("recurrence-pattern");t.find(i)&&(t.find(".recurrence-pattern-type").not(i).hide(),i==".recurrence-pattern-specific-date"?(t.find(".js-continue-until").hide(),t.find(".js-exclusion-dates").hide()):(t.find(".js-continue-until").show(),t.find(".js-exclusion-dates").show()),n(i).fadeIn())});t.find(".add-specific-date").off("click").on("click",function(){n(this).hide();t.find(".js-add-specific-date-group").show()});t.find(".add-specific-date-ok").off("click").on("click",function(){var i=t.find(".recurrence-pattern-type > input:hidden").val().split(","),r,o,s,u,f,e;if(i[0]||(i=[]),r=t.find(".specific-date input"),r.css("color",""),r.val()!=null&&r.val()!=""){if(o=window.navigator.userLanguage||window.navigator.language,moment.locale(o),s=moment(r.val(),"l"),!s.isValid){r.css("color","red");return}u=r.val();f=i.indexOf(u);f>=0&&i.splice(f,1);i.push(u);t.find(".js-specific-datelist-values").val(i);e=t.find(".lstSpecificDates");e.children().remove();n.each(i,function(n,t){var i="<li><span>"+t+"<\/span> <a href='#' style='display: none'> <i class='fa fa-times'><\/i><\/a><\/li>";e.append(i)});t.find(".js-add-specific-date-group").hide();t.find(".add-specific-date").show()}});t.find(".add-specific-date-cancel").off("click").on("click",function(){t.find(".js-add-specific-date-group").hide();t.find(".add-specific-date").show()});t.find(".lstSpecificDates").on("mouseenter",function(){n(this).find("li a").stop(!0,!0).show()}).on("mouseleave",function(){n(this).find("li a").stop(!0,!0).fadeOut(500)});t.find(".lstSpecificDates").off("click").on("click","li a",function(){var e=n(this).siblings().text(),r=t.find(".js-specific-datelist-values"),i=r.val().split(","),u=i.indexOf(e),f;u>=0&&i.splice(u,1);r.val(i);f=n(this).parent();f.remove()});t.find(".add-exclusion-daterange").off("click").on("click",function(){n(this).hide();t.find(".js-add-exclusion-daterange-group").show(function(){Rock.controls.modal.updateSize()})});t.find(".add-exclusion-daterange-ok").off("click").on("click",function(){var i=t.find(".js-exclusion-daterange-list-values").val().split(","),r;i[0]||(i=[]);var u=t.find(".js-exclusion-date-range-picker input"),f=u.first().val()+" - "+u.last().val(),e=i.indexOf(f);e>=0&&i.splice(e,1);i.push(f);t.find(".js-exclusion-daterange-list-values").val(i);r=t.find(".lstExclusionDateRanges");r.children().remove();n.each(i,function(n,t){var i="<li><span>"+t+"<\/span><a href='#' style='display: none'><i class='fa fa-times'><\/i><\/a><\/li>";r.append(i)});t.find(".js-add-exclusion-daterange-group").hide();t.find(".add-exclusion-daterange").show()});t.find(".add-exclusion-daterange-cancel").off("click").on("click",function(){t.find(".js-add-exclusion-daterange-group").hide();t.find(".add-exclusion-daterange").show()});t.find(".lstExclusionDateRanges").on("mouseenter",function(){n(this).find("li a").stop(!0,!0).show()}).on("mouseleave",function(){n(this).find("li a").stop(!0,!0).fadeOut(500)});t.find(".lstExclusionDateRanges").off("click").on("click","li a",function(){var e=n(this).siblings("span").text(),r=t.find(".js-exclusion-daterange-list-values"),i=r.val().split(","),u=i.indexOf(e),f;u>=0&&i.splice(u,1);r.val(i);f=n(this).parent();f.remove()});t.find(".js-modaldialog-save-link").off("click").on("click",function(n){var r=window.navigator.userLanguage||window.navigator.language;moment.locale(r);var i=t.find('[id*="dpStartDateTime"]').find("input"),u=moment(i.first().val(),"l"),f=i.last().val();if(u.isValid)i.parents(".form-group").first().toggleClass("has-error",0);else{i.parents(".form-group").first().toggleClass("has-error",1);n.preventDefault();return}})},i={cache:{},initialize:function(n){if(!n.id)throw"id is required";var u=new r(n);i.cache[n.id]=u;t.Application.add_load(function(){u.initializeEventHandlers()})}}}()}(jQuery,Sys),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.screenKeyboard=function(){var t=function(n){n.find('[data-command="shift"]').toggleClass("active");i(n,n.find('[data-command="shift"].active').length>0)},i=function(t,i){t.find(".digit").each(function(){n(this).text(i===!0?n(this).data("alt-value"):n(this).data("value"))})},r=function(){var i=n(this).closest(".screen-keyboard"),r=n("#"+i.data("target"));r.val(r.val()+n(this).text());r.trigger("input");i.find('[data-command="shift"].active').length>0&&t(i)},u=function(r){var e=n(this).closest(".screen-keyboard"),o=n("#"+e.data("target")),u=n(this).data("command"),f;u==="backspace"?(f=o.val(),f.length>0&&(f=f.substr(0,f.length-1)),o.val(f),o.trigger("input")):u==="clear"?(o.val(""),o.trigger("input")):u==="shift"?(e.find('[data-command="caps"]').removeClass("active"),t(e)):u==="caps"?(e.find('[data-command="shift"]').removeClass("active"),n(this).toggleClass("active"),i(e,n(this).hasClass("active"))):u==="tab"||u==="enter"&&(window.location="javascript:__doPostBack('"+r.postback+"', 'enter')")};return{initialize:function(t){if(!t.id)throw"id is required";var i=n("#"+t.id);i.find(".digit").on("click",r);i.find(".command").on("click",function(){u.apply(this,[t])})}}}()}(jQuery),function(){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.searchField=function(){var n,t=function(n){this.controlId=n.controlId;this.$el=$("#"+this.controlId);this.name=n.name};return t.prototype={constructor:t,initialize:function(){var i=this,n=sessionStorage.getItem("com.rockrms.search"),t;n&&n!=""&&(t=i.$el.parents(".smartsearch"),t.find("input:hidden").val(n),t.find("a.dropdown-toggle > span").html(t.find('li[data-key="'+n+'"] > a').html()));this.$el.typeahead({name:this.name,limit:15,remote:{url:Rock.settings.get("baseUrl")+"api/search?type=%TYPE&term=%QUERY&$top=15",replace:function(n,t){var r=n;return r=r.replace("%TYPE",i.$el.parents(".smartsearch").find("input:hidden").val()),r.replace("%QUERY",t)}}});this.initializeEventHandlers()},initializeEventHandlers:function(){var n=this,t=function(t){var u=$("<p>"+t+"<\/p>").find("data").first(),s=u.attr("return-type"),h=u.attr("return-id"),i;if(s==null||h==null){i="";u.each(function(){$.each(this.attributes,function(){this&&(i+="&"+this.name+"="+encodeURIComponent(this.value))})});var c=$("<div/>").html(t).text().trim(),f=n.$el.parents(".smartsearch").find("input:hidden").val(),e=n.$el.parents(".smartsearch").find('li[data-key="'+f+'"]'),o=e.attr("data-target"),r=Rock.settings.get("baseUrl")+o.replace("{0}",encodeURIComponent(c));i!=""&&(r+=r.indexOf("?")>-1?i:i.replace(/^&/,"?"));window.location=r}else{var f=n.$el.parents(".smartsearch").find("input:hidden").val(),e=n.$el.parents(".smartsearch").find('li[data-key="'+f+'"]'),o=e.attr("data-target"),r=Rock.settings.get("baseUrl")+o.replace("{0}",encodeURIComponent(s)+"/"+encodeURIComponent(h));window.location=r}};this.$el.on("typeahead:selected typeahead:autocompleted",function(n,i){t(i.value)});this.$el.on("keydown",function(n){if(n.keyCode===13)return n.preventDefault(),!1});this.$el.on("keyup",function(n){n.keyCode===13&&""!==$(this).val().trim()&&t($(this).val())});this.$el.parents(".smartsearch").find(".dropdown-menu a").on("click",function(){var t=$(this),r=t.html(),i=t.parent().attr("data-key");sessionStorage.setItem("com.rockrms.search",i);t.parents(".dropdown-menu").siblings(".navbar-link").find("span").html(r);n.$el.parents(".smartsearch").find("input:hidden").val(i)})}},n={defaults:{controlId:null,name:"search"},controls:{},initialize:function(i){var u,r=$.extend({},n.defaults,i);if(!r.controlId)throw"controlId is required";n.controls[r.controlId]?u=n.controls[r.controlId]:(u=new t(r),n.controls[r.controlId]=u);$(function(){u.initialize()})}}}()}(),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.slidingDateRangePicker=function(){var r={initialize:function(r){if(!r.id)throw"id is required";var u=n("#"+r.id),f=u.find(".js-slidingdaterange-select");i(u,f);t(u);f.on("change",function(){i(u,f);t(u)});n(".js-number, .js-time-units-singular, .js-time-units-plural, .js-slidingdaterange-select, .js-lower, .js-upper",u).on("change",function(){t(u)});n(".js-number",u).on("keyup",function(){t(u)})}},i=function(n,t){var i=t.val(),r=i=="0",s=i=="1",h=i=="2",u=i=="4",f=i=="8",e=i=="16",o;n.find(".js-number").toggle(r||u||f||e);n.find(".js-time-units-singular").toggle(s);n.find(".js-time-units-plural").toggle(r||u||f||e);n.find(".js-time-units-date-range").toggle(h);o=n.closest(".js-slidingdaterange-container");r||u||f||e||s?o.find(".js-slidingdaterange-info").css("display","inline"):o.find(".js-slidingdaterange-info").hide()},t=function(t){var r=0,o,s;r=t.find(".js-time-units-singular").is(":visible")?t.find(".js-time-units-singular").val():t.find(".js-time-units-plural").val();var e=t.find(".js-number").val(),i=t.closest(".js-slidingdaterange-container"),u="",f=t.find(".js-slidingdaterange-select"),h=f.val();if(h=="2"){var c=i.find(".js-lower"),l=c.find(".form-control").val(),a=i.find(".js-upper"),v=a.find(".form-control").val();u="&startDate="+l+"&endDate="+v}o=Rock.settings.get("baseUrl")+"api/Utility/CalculateSlidingDateRange?slidingDateRangeType="+f.val()+"&timeUnitType="+r+"&number="+e+u;n.get(o,function(n){i.find(".js-slidingdaterange-info").text(n)});s=Rock.settings.get("baseUrl")+"api/Utility/GetSlidingDateRangeTextValue?slidingDateRangeType="+f.val()+"&timeUnitType="+r+"&number="+e+u;n.get(s,function(n){i.find(".js-slidingdaterange-text-value").val(n)})};return r}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.tagList=function(){var t=function(n){this.controlId=n.controlId;this.entityTypeId=n.entityTypeId;this.currentPersonId=n.currentPersonId;this.entityGuid=n.entityGuid;this.entityQualifierColumn=n.entityQualifierColumn;this.entityQualifierValue=n.entityQualifierValue;this.preventTagCreation=n.preventTagCreation;this.delaySave=n.delaySave;this.categoryGuid=n.categoryGuid;this.includeInactive=n.includeInactive},i;return t.prototype.verifyTag=function(t){var r=i.tagLists[n(this).attr("id")],u;if(!/^((?!<)(?!>)(?!%)(?!&).)*$/.test(t)){Rock.dialogs.alert("Invalid characters have been entered for the tag name. Angle brackets, percent, and ampersand are not allowed.");n("#"+r.controlId).removeTag(t);return}u=Rock.settings.get("baseUrl")+"api/tags";u+="?entityTypeId="+r.entityTypeId;u+="&ownerId="+r.currentPersonId;u+="&name="+encodeURIComponent(t);u+="&includeInactive"+r.includeInactive.toString();r.entityQualifierColumn&&(u+="&entityQualifier="+r.entityQualifierColumn);r.entityQualifierValue&&(u+="&entityQualifierValue="+r.entityQualifierValue);r.categoryGuid&&r.categoryGuid!=""&&(u+="&categoryGuid="+r.categoryGuid);n.ajax({url:u,statusCode:{404:function(){r.preventTagCreation?n("#"+r.controlId).removeTag(t):Rock.dialogs.confirm('A tag called "'+n("<div/>").text(t).html()+'" does not exist. Do you want to create a new personal tag?',function(i){i?r.addTag(t):n("#"+r.controlId).removeTag(t)})},403:function(){Rock.dialogs.alert("Invalid characters have been entered for the tag name. Angle brackets, percent, and ampersand are not allowed.");n("#"+r.controlId).removeTag(t)},200:function(){r.addTag(t)}}})},t.prototype.addTag=function(t){var i=this,r=Rock.settings.get("baseUrl")+"api/taggeditems";r+="?entityTypeId="+i.entityTypeId;r+="&ownerId="+i.currentPersonId;r+="&entityGuid="+i.entityGuid;r+="&name="+encodeURIComponent(t);r+="&includeInactive"+i.includeInactive.toString();i.categoryGuid&&i.categoryGuid!=""&&(r+="&categoryGuid="+this.categoryGuid);i.delaySave||(i.entityQualifierColumn&&(r+="/"+i.entityQualifierColumn),i.entityQualifierValue&&(r+="/"+i.entityQualifierValue),n.ajax({type:"POST",url:r,error:function(n,t,i){console.log("AddTag() status: "+t+" ["+i+"]: "+n.responseText)}}))},t.prototype.removeTag=function(t){var r=i.tagLists[n(this).attr("id")],u=Rock.settings.get("baseUrl")+"api/taggeditems";r.delaySave||(u+="?entityTypeId="+r.entityTypeId,u+="&ownerId="+r.currentPersonId,u+="&entityGuid="+r.entityGuid,u+="&name="+encodeURIComponent(t),u+="&includeInactive"+r.includeInactive.toString(),r.entityQualifierColumn&&(u+="&entityQualifier="+r.entityQualifierColumn),r.entityQualifierValue&&(u+="&entityQualifierValue="+r.entityQualifierValue),r.categoryGuid&&r.categoryGuid!=""&&(u+="&categoryGuid="+r.categoryGuid),n.ajax({type:"DELETE",url:u,context:{tagName:t,tagsInput:this},error:function(t,i,r){if(!t||t.status!=404){Rock.dialogs.alert("Unable to remove tag: "+r);var u=n(this.tagsInput).val()+","+this.tagName;return u=u.split(",").sort(function(n,t){return n.toLowerCase().localeCompare(t.toLowerCase())}).join(","),n(this.tagsInput).importTags(u),!1}}}))},t.prototype.initialize=function(){var t=Rock.settings.get("baseUrl")+"api/Tags/AvailableNames";t+="?entityTypeId="+this.entityTypeId;t+="&ownerId="+this.currentPersonId;t+="&entityGuid="+this.entityGuid;t+="&includeInactive"+this.includeInactive.toString();this.entityQualifierColumn&&(t+="&entityQualifier="+this.entityQualifierColumn);this.entityQualifierValue&&(t+="&entityQualifierValue="+this.entityQualifierValue);this.categoryGuid&&this.categoryGuid!=""&&(t+="&categoryGuid="+this.categoryGuid);n("ul.ui-autocomplete").css({width:"300px"});n("#"+this.controlId).tagsInput({autocomplete_url:function(i,r){n.ajax({url:t+"&name="+i.term,dataType:"json",success:function(t){r(n.map(t,function(n){return{value:n.Name,"class":n.OwnerId?"personal":"system"}}))},error:function(n,t,i){console.log("availablenames status: "+t+" ["+i+"]: "+n.reponseText)}})},autoCompleteAppendTo:"div.tag-wrap",autoCompleteMessages:{noResults:function(){},results:function(){}},height:"auto",width:"100%",interactive:!0,defaultText:"add tag",removeWithBackspace:!1,onAddTag:this.verifyTag,onRemoveTag:this.removeTag})},i={tagLists:{},initialize:function(n){if(!n.controlId)throw"controlId must be set.";if(!n.entityTypeId)throw"entityTypeId must be set.";if(!n.currentPersonId)throw"currentPersonId must be set";if(!n.entityGuid)throw"entityGuid must be set";var r=new t(n);r.options=n;i.tagLists[n.controlId]=r;r.initialize()}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.timePicker=function(){return{initialize:function(t){if(!t.id)throw"id is required";var i=n("#"+t.id);i.closest("div").addClass("bootstrap-timepicker").addClass("input-append");i.timepicker({defaultTime:!1});i.closest(".js-timepicker-input").find(".js-timepicker-clear").on("click",function(){i.timepicker("clear")})}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.toggleButton=function(){return{initialize:function(t){if(!t.id)throw"id is required";n("#"+t.id+" .btn-toggle").on("click",function(i){i.stopImmediatePropagation();n(this).find(".btn").toggleClass("active");t.activeButtonCssClass&&n(this).find("."+t.activeButtonCssClass).length>0&&n(this).find(".btn").toggleClass(t.activeButtonCssClass);t.onButtonCssClass&&n(this).find(".js-toggle-on").toggleClass(t.onButtonCssClass);t.offButtonCssClass&&n(this).find(".js-toggle-off").toggleClass(t.offButtonCssClass);n(this).parent().find(".js-toggle-checked").val(n(this).find(".js-toggle-on").hasClass("active"))})}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.util=function(){return{googleMapsIsLoaded:function(){n(window).trigger("googleMapsIsLoaded")},loadGoogleMapsApi:function(t){if(n("#googleMapsApi").length)typeof google=="object"&&typeof google.maps=="object"&&this.googleMapsIsLoaded();else{n.ajaxSetup({cache:!0});var i=t+"&callback=Rock.controls.util.googleMapsIsLoaded";n("head").prepend("<script id='googleMapsApi' src='"+i+"' />")}},getValueAsPixels:function(n){var t=parseFloat(n);return t?t+"px":""},getScrollbarWidth:function(){var n=document.createElement("div"),t;return n.className="modal-scrollbar-measure",document.body.appendChild(n),t=n.offsetWidth-n.clientWidth,document.body.removeChild(n),t}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};const r=[{Value:1,Text:"Equal To"},{Value:2,Text:"Not Equal To"},{Value:4,Text:"Starts With"},{Value:8,Text:"Contains"},{Value:16,Text:"Does Not Contain"},{Value:32,Text:"Is Blank"},{Value:64,Text:"Is Not Blank"},{Value:2048,Text:"Ends With"}],t=1,i=2;Rock.controls.valueFilter=function(){function o(n){var r,c,o;try{r=JSON.parse(n.find('input[type="hidden"]').val())}catch(l){r=null}r===null&&(r={ExpressionType:i,Filters:[]},n.find('input[type="hidden"]').val(JSON.stringify(r)));var s=n.data("filterTypeAll"),h=n.data("filterTypeAny"),e=n.data("options");r.ExpressionType===t?(s.addClass(e.btnToggleOnClass).removeClass(e.btnToggleOffClass),h.addClass(e.btnToggleOffClass).removeClass(e.btnToggleOnClass)):(h.addClass(e.btnToggleOnClass).removeClass(e.btnToggleOffClass),s.addClass(e.btnToggleOffClass).removeClass(e.btnToggleOnClass));for(c in r.Filters)o=r.Filters[c],f(n,o.Value,o.Comparison);r.Filters.length===0&&(f(n,"",8),u(n))}function s(n){var i=n.data("filterTypeAll"),r=n.data("filterTypeAny"),t=n.data("options");r.on("click",function(f){f.preventDefault();r.addClass(t.btnToggleOnClass).removeClass(t.btnToggleOffClass);i.addClass(t.btnToggleOffClass).removeClass(t.btnToggleOnClass);u(n)});i.on("click",function(f){f.preventDefault();i.addClass(t.btnToggleOnClass).removeClass(t.btnToggleOffClass);r.addClass(t.btnToggleOffClass).removeClass(t.btnToggleOnClass);u(n)});n.data("addButton").on("click",function(t){t.preventDefault();f(n,"",8);u(n)})}function f(t,i,r){var f=t.data("options"),o=null,u=n('<div class="input-group margin-t-sm"><\/div>'),y=n('<input type="text" class="form-control">').appendTo(u),c=n('<span class="input-group-btn" />').appendTo(u),p=n('<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span /> <span class="caret" /><\/button>').appendTo(c),l=n('<ul class="dropdown-menu dropdown-menu-right"><\/ul>').appendTo(c),s,a,v;for(s in f.comparisonTypes)a=n('<li><a href="#" data-value="'+f.comparisonTypes[s].Value+'">'+f.comparisonTypes[s].Text+"<\/a><\/li>").appendTo(l),r===f.comparisonTypes[s].Value&&(o=a);o=o||l.find("li:first-child");v=n('<span class="input-group-btn" />').appendTo(u);n('<button type="button" class="btn btn-danger btn-square"><i class="fa fa-times"><\/i><\/button>').appendTo(v);y.val(i);e(t,o,!0);h(t,u);t.data("rowContainer").append(u)}function h(t,i){i.find('input[type="text"]').on("change",function(){u(t)});i.find("ul > li > a").on("click",function(i){i.preventDefault();e(t,n(this))});i.find("button.btn-danger").on("click",function(i){i.preventDefault();n(this).closest(".input-group").remove();u(t)})}function e(n,t,i){var r=t.closest(".input-group-btn");r.find(".dropdown-toggle span:first-child").text(t.text());t.data("value")===32||t.data("value")===64?n.find('input[type="text"]').val("").prop("disabled",!0):n.find('input[type="text"]').prop("disabled",!1);i!==!0&&u(n)}function u(r){var e=r.data("options"),u=[],f;r.data("rowContainer").find(".input-group").each(function(t,i){var r=n(i),f=r.find('input[type="text"]').val(),e=r.find("button.dropdown-toggle span:first-child").text(),o=r.find("ul li a").filter(function(){return n(this).text()===e}).data("value");u.push({Value:f,Comparison:o})});u.length===1&&u[0].Value===""&&u[0].Comparison===8&&(u=[]);f={ExpressionType:r.data("filterTypeAny").hasClass(e.btnToggleOnClass)?i:t,Filters:u};r.find('input[type="hidden"]').val(JSON.stringify(f))}return{initialize:function(t){var u;if(!t.controlId)throw"controlId is required";for(t=n.extend({btnToggleOnClass:"btn-info",btnToggleOffClass:"btn-default",required:!0,requiredMessage:"The field is required",hideFilterMode:!1,comparisonTypes:r,defaultComparison:8},t),t.comparisonTypeByValue={},u=0;u<t.comparisonTypes.length;u++)t.comparisonTypeByValue[t.comparisonTypes[u].Value]=t.comparisonTypes[u].Text;var i=n("#"+t.controlId),f=n('<div class="text-right" />').appendTo(i),e=n('<div class="btn-group" role="group" />').appendTo(f),h=n('<button type="button" class="btn btn-default btn-xs">Any<\/button>').appendTo(e),c=n('<button type="button" class="btn btn-default btn-xs">All<\/button>').appendTo(e);t.hideFilterMode===!0&&f.addClass("hidden");var l=n("<div />").appendTo(i),a=n('<div class="text-right" />').appendTo(i),v=n('<a href="#" class="btn btn-default btn-square btn-sm margin-t-sm"><i class="fa fa-plus"><\/i><\/a>').appendTo(a);i.data("options",t);i.data("filterTypeAny",h);i.data("filterTypeAll",c);i.data("rowContainer",l);i.data("addButton",v);s(i);o(i)},clientValidate:function(t,i){var r=n(t).prev(),u=r.data("options").required,f=JSON.parse(r.find('input[type="hidden"]').val()),e=!u||f.Filters.length>0;e?(r.closest(".form-group").removeClass("has-error"),i.IsValid=!0):(r.closest(".form-group").addClass("has-error"),i.IsValid=!1,t.errormessage=r.data("options").requiredMessage)}}}()}(jQuery),function(){function n(n){var t=n.closest("span.value-list"),i="",r=["|",","];t.children("span.value-list-rows").first().children("div.controls-row").each(function(){var n=$(this).children(".js-value-list-input").first().val();r.forEach(function(t){var i=new RegExp("\\"+t,"g");n.indexOf(t)>-1&&(n=n.replace(i,encodeURIComponent(t)))});i+=n+"|"});t.children("input").first().val(i)}Sys.Application.add_load(function(){$("a.value-list-add").on("click",function(t){t.preventDefault();var i=$(this).closest(".value-list"),r=i.find(".js-value-list-html").val();i.find(".value-list-rows").append(r);n($(this));Rock.controls.modal.updateSize($(this))});$(document).on("click","a.value-list-remove",function(t){t.preventDefault();var i=$(this).closest("span.value-list-rows");$(this).closest("div.controls-row").remove();n(i);Rock.controls.modal.updateSize($(this))});$(document).on("change",".js-value-list-input",function(){n($(this))})})}(),function(n){"use strict";n.Application.add_load(function(){$("a.warning").on("click",function(n){n.preventDefault();$(this).siblings("div.alert-warning").slideToggle(function(){Rock.controls.modal.updateSize(this)});$(this).siblings("div.alert-info").slideUp()})})}(Sys),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.wordcloud=function(){return{initialize:function(t){function pt(n){i={};var t={},r=!1;n.split(r?/\n/g:vt).forEach(function(n){yt.test(n)||(r||(n=n.replace(at,"")),lt.test(n.toLowerCase())||(n=n.substr(0,ht),t[n.toLowerCase()]=n,i[n=n.toLowerCase()]=(i[n]||0)+1))});i=d3.entries(i).sort(function(n,t){return t.value-n.value});i.forEach(function(n){n.key=t[n.key]});wt()}function wt(){d.font(et).spiral(st).rotate(function(){return e[Math.floor(Math.random()*e.length)]});l=d3.scaleLog().range([10,100]);i.length&&l.domain([+i[i.length-1].value||1,+i[0].value]);k=0;a.style("display",null);c=[];d.stop().words(i.slice(0,w=Math.min(i.length,+ot))).start()}function bt(){a.text(++k+"/"+w)}function kt(n,t){var i,f,e;a.style("display","none");b=t?Math.min(r/Math.abs(t[1].x-r/2),r/Math.abs(t[0].x-r/2),u/Math.abs(t[1].y-u/2),u/Math.abs(t[0].y-u/2))/2:1;c=n;i=v.selectAll("text").data(c,function(n){return n.text.toLowerCase()});i.transition().duration(1e3).attr("transform",function(n){return"translate("+[n.x,n.y]+")rotate("+n.rotate+")"}).style("font-size",function(n){return n.size+"px"});i.enter().append("text").attr("text-anchor","middle").attr("transform",function(n){return"translate("+[n.x,n.y]+")rotate("+n.rotate+")"}).style("font-size","1px").transition().duration(1e3).style("font-size",function(n){return n.size+"px"}).style("font-family",function(n){return n.font}).text(function(n){return n.text}).style("fill",function(){return y[Math.floor(Math.random()*y.length)]});f=ct.append("g").attr("transform",v.attr("transform"));e=f.node();i.exit().each(function(){e.appendChild(this)});f.transition().duration(1e3).style("opacity",1e-6).remove();v.transition().delay(1e3).duration(750).attr("transform","translate("+[r>>1,u>>1]+")scale("+b+")")}var p,h;if(!t.inputTextId)throw"inputTextId is required";if(!t.visId)throw"visId is required";if(!d3.select("#"+t.visId).empty()){var tt=n("#"+t.inputTextId),it=t.visId,rt=t.statusId,ut=t.width||800,ft=t.height||300,et=t.fontName||"Impact",ot=t.maxWords||255,dt=t.scaleName||"log",st=t.spiralName||"archimedean",y=t.colors||["#0193B9","#F2C852","#1DB82B","#2B515D","#ED3223"],f=t.angleCount==undefined?6:t.angleCount;f>180&&(f=180);var o=t.angleMin==undefined?-90:t.angleMin,s=t.angleMax==undefined?90:t.angleMax,e=[];if(f==1)e.push((s+o)/2);else if(f==2)e.push(o),e.push(s);else if(f>2)for(p=(s-o)/(f-1),h=o;h<=s;)e.push(h),h+=p;var gt=d3.scaleLinear().domain([0,1,2,3,4,5,6,10,15,20,100]).range(d3.schemeCategory20b),r=ut,u=ft,c=[],w,b=1,k=0,i,l,ht=30,a=d3.select("#"+rt),d=d3.layout.cloud().timeInterval(10).size([r,u]).fontSize(function(n){return l(+n.value)}).text(function(n){return n.key}).on("word",bt).on("end",kt),g=d3.select("#"+it).append("svg").attr("width",r).attr("height",u),ct=g.append("g"),v=g.append("g").attr("transform","translate("+[r>>1,u>>1]+")"),lt=/^(i|me|my|myself|we|us|our|ours|ourselves|you|your|yours|yourself|yourselves|he|him|his|himself|she|her|hers|herself|it|its|itself|they|them|their|theirs|themselves|what|which|who|whom|whose|this|that|these|those|am|is|are|was|were|be|been|being|have|has|had|having|do|does|did|doing|will|would|should|can|could|ought|i'm|you're|he's|she's|it's|we're|they're|i've|you've|we've|they've|i'd|you'd|he'd|she'd|we'd|they'd|i'll|you'll|he'll|she'll|we'll|they'll|isn't|aren't|wasn't|weren't|hasn't|haven't|hadn't|doesn't|don't|didn't|won't|wouldn't|shan't|shouldn't|can't|cannot|couldn't|mustn't|let's|that's|who's|what's|here's|there's|when's|where's|why's|how's|a|an|the|and|but|if|or|because|as|until|while|of|at|by|for|with|about|against|between|into|through|during|before|after|above|below|to|from|up|upon|down|in|out|on|off|over|under|again|further|then|once|here|there|when|where|why|how|all|any|both|each|few|more|most|other|some|such|no|nor|not|only|own|same|so|than|too|very|say|says|said|shall)$/,at=new RegExp("[!-#%-*,-/:;?@\\[-\\]_{}¡§«¶·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰૰෴๏๚๛༄-༒༔༺-༽྅࿐-࿔࿙࿚၊-၏჻፠-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳀-᳇᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰-⸻、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꫰꫱꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]","g"),vt=/[ \f\n\r\t\v\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000\u3031-\u3035\u309b\u309c\u30a0\u30fc\uff70]+/g,yt=/^(@|https?:|\/\/)/,nt=tt.val();nt&&pt(nt)}}}}()}(jQuery),function(n){"use strict";window.Rock=window.Rock||{};Rock.controls=Rock.controls||{};Rock.controls.yearPicker=function(){return{initialize:function(t){if(!t.id)throw"id is required";var i=new Date(1e3,1,1);n("#"+t.id).datepicker({format:"yyyy",assumeNearbyYear:10,autoclose:!0,startView:2,minViewMode:2,startDate:i,zIndexOffset:1050})}}}()}(jQuery);var loadFunction=function(){function n(n){var t=$(n).closest(".field-criteria"),i=$(n).val(),r=i==32||i==64,u=i==4096;r?(t.find(".js-filter-control").hide(),t.find(".js-filter-control-between").hide()):u?(t.find(".js-filter-control").hide(),t.find(".js-filter-control-between").show()):(t.find(".js-filter-control").show(),t.find(".js-filter-control-between").hide())}$(".js-filter-compare").each(function(){n(this)});$(".js-filter-compare").on("change",function(){n(this)});$("select.entity-property-selection").on("change",function(){var n=$(this).closest(".js-filter-row");n.find("div.field-criteria").hide();n.find("div.field-criteria").eq($(this).find(":selected").index()).show()});$(".filter-item > header").on("click",function(){$(this).siblings(".panel-body").slideToggle();$(this).children("div.pull-left").children("div").slideToggle();$expanded=$(this).children("input.filter-expanded");$expanded.val($expanded.val()=="True"?"False":"True");$("a.filter-view-state > i",this).toggleClass("fa-chevron-down");$("a.filter-view-state > i",this).toggleClass("fa-chevron-up")});$(".filter-item a.btn-danger").on("click",function(n){n.stopImmediatePropagation()});$(".filter-item-select").on("click",function(n){n.stopImmediatePropagation()})};$(document).ready(function(){loadFunction();Sys.Application.add_load(loadFunction)}),function(n){"use strict";window.Rock=window.Rock||{};Rock.reporting=function(){return{formatFilterForDateField:function(t,i){var e=n(".js-filter-control-between",i).is(":visible"),u="",f,r;return e?t+" during "+n(".js-slidingdaterange-text-value",i).val():(f=n(".js-current-date-checkbox",i).is(":checked"),f?(r=n(".js-current-date-offset",i).val(),u=r>0?"Current Date plus "+r+" days":r<0?"Current Date minus "+-r+" days":"Current Date"):u=n(".js-date-picker input",i).filter(":visible").val(),t+" "+n(".js-filter-compare",i).find(":selected").text()+" '"+u+"'")},formatFilterForDateTimeField:function(t,i){var s=n(".js-filter-control-between",i).is(":visible"),u="",f="",e,r,o;return s?t+" during "+n(".js-slidingdaterange-text-value",i).val():(e=n(".js-current-datetime-checkbox",i).is(":checked"),e?(r=Number(n(".js-current-datetime-offset",i).val()),u=r>0?"Current Time plus "+r+" minutes":r<0?"Current Time minus "+-r+" minutes":"Current Time"):(u=n("input.js-datetime-date",i).filter(":visible").val()||"",f=n("input.js-datetime-time",i).filter(":visible").val()||""),o=(u+" "+f).trim(),t+" "+n(".js-filter-compare",i).find(":selected").text()+" '"+o+"'")},formatFilterForCheckBoxListFilterControl:function(t,i){var r="";return n("input:checked",i).each(function(){r+=r==""?"":" OR ";r+=" '"+n(this).parent().text()+"'"}),t+" is "+r},formatFilterForDefinedValueField:function(n,t){return formatFilterForCheckBoxListFilterControl(n,t)},formatFilterForOtherDataViewFilter:function(t,i){var r=n(".js-dataview .js-item-name-value",i).val();return t+" "+r},formatFilterForSelectSingleField:function(n,t){return formatFilterForCheckBoxListFilterControl(n,t)},formatFilterForGroupFilterField:function(t,i){var c=n(".js-group-picker",i).find(".selected-names").text(),s=n(".js-roles",i).find(":checked").closest("label"),r=t+" "+c,l=n(".js-include-child-groups",i).is(":checked"),h,u,f,e,o;if(l){var a=n(".js-include-child-groups-descendants",i).is(":checked"),v=n(".js-include-selected-groups",i).is(":checked"),y=n(".js-include-inactive-groups",i).is(":checked");r=a?r+" OR descendant groups":r+" OR child groups";y&&(r+=", including inactive groups");v||(r=r+", NOT including selected groups")}return s.length>0&&(h=s.map(function(){return n(this).text()}).get().join(","),r=r+", with role(s): "+h),u=n(".js-group-member-status option:selected",i).text(),u&&(r=r+", with member status:"+u),f=n(".js-dateadded-sliding-date-range .js-slidingdaterange-text-value",i).val(),f&&(r=r+", added to group in Date Range: "+f),e=n(".js-firstattendance-sliding-date-range .js-slidingdaterange-text-value",i).val(),e&&(r=r+", first attendance to group in Date Range: "+e),o=n(".js-lastattendance-sliding-date-range .js-slidingdaterange-text-value",i).val(),o&&(r=r+", last attendance to group in Date Range: "+o),r},formatFilterForHasPhoneFilter:function(t){var r,u,i;return r=n(".js-hasphoneoftype",t).find(":selected").val()=="True"?"Has ":"Doesn't have ",u=n(".js-phonetype",t).find(":selected").text(),i=n(".js-hassms",t).find(":selected").text(),i=="Yes"?i=" AND has SMS Enabled":i=="No"&&(i=" AND doesn't have SMS Enabled"),r+u+i},formatFilterDefault:function(t,i){var u=n(".js-filter-compare",i).find(":selected").text(),r=n("input[type=text].js-filter-control",i).val(),f;return r&&r!=""||(r=n(".js-filter-control",i).find(":selected").map(function(){return this.text}).get().join("', '")),r&&r!=""||(r=n(".js-filter-control",i).find(":checked").next().map(function(){return n(this).text()}).get().join("', '")),f=t,n(".js-filter-control",i).is(":visible")?t+" "+u+" '"+r+"'":t+" "+u}}}()}(jQuery)